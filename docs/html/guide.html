<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Config5</title><link rel="stylesheet" href="docbook.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en_US" class="book" title="Config5"><div class="titlepage"><div><div><h1 class="title"><a name="idp192"></a>Config5</h1></div><div><h2 class="subtitle">Systems Administrator's Guide</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Stefan</span> <span class="surname">Walter</span></h3><code class="email">&lt;<a class="email" href="mailto:stefan.walter@inf.ethz.ch">stefan.walter@inf.ethz.ch</a>&gt;</code></div></div><div><p class="copyright">Copyright © 2013 ETH Zurich, ISGINF</p></div><div><div class="legalnotice" title="Legal Notice"><a name="idp25680"></a><p>Permission is granted to copy, distribute and/or modify this
      document under the terms of the GNU Free Documentation License, Version
      1.3 or any later version published by the Free Software Foundation; with
      no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A
      copy of the license is included in the section entitled "GNU Free
      Documentation License".</p></div></div><div><p class="pubdate">March 2013</p></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="2"><b>Revision History</b></th></tr><tr><td align="left"></td><td align="left">March 2013</td></tr><tr><td align="left" colspan="2">Third Revision for Version 2.2.</td></tr><tr><td align="left"></td><td align="left">February 2013</td></tr><tr><td align="left" colspan="2">Second Revision for Version 2.1.</td></tr><tr><td align="left"></td><td align="left">August 2012</td></tr><tr><td align="left" colspan="2">First Revision for Version 2.0.</td></tr><tr><td align="left"></td><td align="left">July 2011</td></tr><tr><td align="left" colspan="2">Second Draft.</td></tr><tr><td align="left"></td><td align="left">June 2011</td></tr><tr><td align="left" colspan="2">First Draft.</td></tr></table></div></div></div><hr></div><div lang="en_US" class="preface" title="Preface"><div class="titlepage"><div><div><h2 class="title"><a name="idp3120"></a>Preface</h2></div></div></div><p><span class="productname">Config5</span> is a configuration management
  utility for UNIX systems. It is particularly well suited to manage large
  numbers of systems in an enterprise where the configuration varies in the
  various organizational units. Configuration data can be verified before
  deployment which makes deployment more resilient to human errors and
  facilitates teamwork. <span class="productname">Config5</span> is highly
  customizable and extensible to support a broad variation of UNIX and
  UNIX-like operating systems.</p><div class="section" title="1. Background"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp29664"></a>1. Background</h2></div></div></div><p><span class="orgname">The IT Service Group
    (</span><span class="emphasis"><em><span class="orgname">isginf</span></em></span>) of the
    <span class="orgname">Department of Computer Science</span> at ETH Zurich is
    managing UNIX systems since the early nineties. Since then we have always
    used custom configuration management utilities to provision servers and
    workstations. <span class="productname">Config5</span> is the
    <span class="emphasis"><em>fifth</em></span> utility that we developed, hence its name. We
    believe that <span class="productname">Config5</span> may be useful for others
    too and therefore release <span class="productname">Config5</span> as open
    source project and make it publicly available.</p></div><div class="section" title="2. Motivation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp34304"></a>2. Motivation</h2></div></div></div><p>Having a way to provision computer systems with configuration data
    over the whole life cycle is important to any systems administrator who
    manages two computers or more.</p><p>Some enterprise operating systems provide a way to provision a
    configuration during the initial installation but usually provide none to
    update the configuration later. Many programs exist to fill in this gap.
    Utilities like <span class="productname">Bcfg2</span> <a class="xref" href="#bib.bcfg2">[1]</a>, <span class="productname">Cfengine</span> <a class="xref" href="#bib.cfengine">[2]</a>, <span class="productname">LCFG</span> <a class="xref" href="#bib.lcfg">[3]</a>, <span class="productname">Puppet</span> <a class="xref" href="#bib.puppet">[4]</a> and many others were all developed to solve one
    problem: To consistently manage the configuration of many computers. Each
    of them has a different philosophy, different design requirements and
    different strengths and weaknesses. A systems administrator can already
    now pick the one that fits his or her needs, policies or work flow
    best.</p><p>At the end of 2010 <span class="emphasis"><em>isginf</em></span> was preparing to roll
    out <span class="productname">Red Hat Enterprise Linux</span>
    <span class="productnumber">6</span>. Because of some important missing
    functionality and other problems with our previous configuration
    management utilities we once more looked for alternatives. Unfortunately
    none of the existing utilities were suitable for our requirements and we
    developed <span class="productname">Config5</span>.</p><div class="section" title="2.1. Requirements"><div class="titlepage"><div><div><h3 class="title"><a name="idp43376"></a>2.1. Requirements</h3></div></div></div><p>The way IT is organized for us (in an educational institution with
      thirty-odd research groups) defines an interesting set of general
      conditions:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Our people are free to use our service but are not required
          to. As a consequence we never know for sure what machines are
          around. A system that we install today may be reinstalled by its
          owner with his favorite distro the next day. Workstations are
          generally installed with both Windows and Linux and either of them
          may not be booted into for months. The difference between a
          reinstalled system and one that is always booted in the other
          operating system is difficult to track.</p></li><li class="listitem"><p>We provide installations on laptops too. These may be outside
          the organization for weeks but must be able to update themselves
          without access to our infrastructure.</p></li><li class="listitem"><p>Every research group has its own set of configuration data
          that is unique to it. Configured printers, authentication settings,
          firewall rules are typically all different.</p><p>Total uniformity of the deployed systems even within a
          research group is difficult to enforce. There are always exceptions
          or special configurations requested for a project. Such exceptions
          must be tracked and documented.</p></li><li class="listitem"><p>We are organized as a team with individual responsibilities.
          Parts of the configuration may be changed by several team members at
          the same time.</p></li></ul></div><p>Based on the above and a few lessons learned we defined the
      following set of requirements for a suitable configuration management
      utility:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The configuration must be pulled by client systems rather than
          pushed on by a server.</p></li><li class="listitem"><p>The configuration must be selected using information that may
          be only known to the client system but is not maintained in a
          central database. This implies that the client system selects the
          configuration that it needs rather than having a server unilaterally
          decide what it has to have.</p></li><li class="listitem"><p>Configuration files must be constructible from templates and
          fragments.</p></li><li class="listitem"><p>The deployment should be fast and scalable. The configuration
          may be applied often and on many systems.</p></li><li class="listitem"><p>Changes to the configuration must be traceable and revertible.
          This can usually be achieved with a version control management
          system.</p></li><li class="listitem"><p>The system should be resilient to human error as much as
          possible. In combination with a version control management system it
          should prevent invalid, conflicting or incomplete configuration
          data.</p></li></ul></div></div></div><div class="section" title="3. Acknowledgments"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp58816"></a>3. Acknowledgments</h2></div></div></div><p><span class="productname">Config5</span> bases on
    <span class="productname">configng</span> (our <span class="emphasis"><em>fourth</em></span>
    configuration management utility) done by Klaus Ethgen
    (<code class="email">&lt;<a class="email" href="mailto:klaus@ethgen.ch">klaus@ethgen.ch</a>&gt;</code>) while he was a member of
    <span class="emphasis"><em>isginf</em></span> . Some concepts and ideas used in
    <span class="productname">configng</span> were taken from <span class="productname">Template
    Tree</span> <span class="productnumber">II</span> <a class="xref" href="#bib.tetre2">[6]</a>.</p></div></div><div lang="en_US" class="chapter" title="Chapter 1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a name="idp64016"></a>Chapter 1. Introduction</h2></div></div></div><p>In this chapter you will get a quick overview of how
  <span class="productname">Config5</span> works and how it is used.</p><div class="section" title="1.1. Overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp66000"></a>1.1. Overview</h2></div></div></div><p>Configuration data that is managed and deployed with
    <span class="productname">Config5</span> is maintained in a simple directory
    structure. A main directory (the <span class="emphasis"><em>feature set</em></span>)
    contains a set of sub directories (<span class="emphasis"><em>features</em></span>), each of
    which contains configuration files and a specification (the
    <span class="emphasis"><em>spec</em></span> file) that contains instructions.</p><p>By default the main directory is named <code class="filename">features</code> and located in the directory
    <code class="filename">deploy</code> of the
    <span class="productname">Config5</span> distribution:</p><pre class="screen">$ ls
deploy  doc  example
$ ls deploy
bin  etc  features  lib</pre><p>A feature must at least contain the specification file which is by
    default named <code class="filename">spec</code>. A fictive feature named
    <code class="filename">test</code> would look like this:</p><pre class="screen">$ ls deploy/features
test
$ ls deploy/features/test
spec</pre><div class="section" title="1.1.1. The spec File"><div class="titlepage"><div><div><h3 class="title"><a name="idp73936"></a>1.1.1. The spec File</h3></div></div></div><p>The spec file describes the changes to do by grouping them in
      <span class="emphasis"><em>classes</em></span> and is processed from top to bottom.
      Classes start at the beginning of a line and are followed by a colon.
      <span class="emphasis"><em>Changes</em></span> are identified by a unique keyword with
      leading whitespace. Each change belongs to the most recent class
      declaration:</p><pre class="programlisting"># This is a comment

class1: &#8230;
  change1 &#8230;
  change2 &#8230;
  change3 &#8230;

class2: &#8230;
  change1 &#8230;</pre></div><div class="section" title="1.1.2. Changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp76720"></a>1.1.2. Changes</h3></div></div></div><p><span class="productname">Config5</span> has nine core changes built in:
      <code class="function">copy</code>, <code class="function">truncate</code>,
      <code class="function">append</code>, <code class="function">directory</code>,
      <code class="function">link</code>, <code class="function">symlink</code>,
      <code class="function">properties</code>, <code class="function">remove</code> and
      <code class="function">execute</code>. Additional changes can be added with
      extensions.</p><p>Each change supports a number of optional flags right after the
      keyword which modify the behavior of the change. The arguments after
      each keyword vary:</p><pre class="programlisting">  copy       [-bintT] src path user group mode [context] [key=value...]
  truncate   [-intT]  path user group mode [context]
  append     [-b]     src path [key=value...]
  directory  [-ntT]   path user group mode [context]
  link       [-ntT]   src_path dest_path
  symlink    [-bntT]  value path user group [context]
  properties [-ntT]   path user group mode [context]
  remove     [-ntT]   path
  execute    [-bntT]  shell_line</pre><p>Changes are only applied on the <span class="emphasis"><em>target system</em></span>
      (the computer on which <span class="productname">Config5</span> is executed)
      if necessary. The only exceptions is the <code class="function">execute</code>
      change which is always applied.</p><p>For each change <span class="productname">Config5</span> will check if
      applying the change would actually modify the state of the target system
      and skip it if does not.</p></div><div class="section" title="1.1.3. Classes"><div class="titlepage"><div><div><h3 class="title"><a name="idp86912"></a>1.1.3. Classes</h3></div></div></div><p>A class may be a host name, an operating system identifier or some
      other property. A target system that configures itself with
      <span class="productname">Config5</span> will use the available information
      about itself (the <span class="emphasis"><em>system information</em></span>) to choose the
      best matching class and perform the changes of this class:</p><pre class="programlisting">foobar:
  copy hosts.allow.foobar /etc/hosts.allow root root 644
  copy hosts.deny /etc/hosts.deny root root 644

RedHatEnterpriseServer:
  copy hosts.allow /etc/hosts.allow root root 644
  copy hosts.deny /etc/hosts.deny root root 644

RedHatEnterpriseWorkstation_6.1:
  copy hosts.allow.61 /etc/hosts.allow root root 644
  copy hosts.deny /etc/hosts.deny root root 644</pre><p>Identifying the best matching class is customizable but generally
      the class that matches the target system in the most specific way is
      used. For example, if there is a class for the operating system
      identifier and one for the host name of the target system, the later is
      chosen.</p><p>Classes can also include other classes and override changes to
      files done in the included classes:</p><pre class="programlisting">foobar: RedHatEnterpriseServer
  copy hosts.allow.foobar /etc/hosts.allow root root 644

RedHatEnterpriseServer:
  copy hosts.allow /etc/hosts.allow root root 644
  copy hosts.deny /etc/hosts.deny root root 644

RedHatEnterpriseWorkstation_6.1: RedHatEnterpriseServer
  copy hosts.allow.61 /etc/hosts.allow root root 644</pre></div><div class="section" title="1.1.4. File Generation"><div class="titlepage"><div><div><h3 class="title"><a name="idp91744"></a>1.1.4. File Generation</h3></div></div></div><p>Files can be constructed from fragments using the
      <code class="function">append</code> change which can be distributed over
      multiple features.</p><p>All files that are copied and all fragments that are appended are
      by default processed with <span class="productname">Template Toolkit</span>
      <a class="xref" href="#bib.templatetoolkit">[5]</a>. Using
      <span class="emphasis"><em>substitution</em></span> (replacing parts of the template with
      generated content) it is then very easy to generate customized
      configuration files for a set of system from one template. The
      substitutions can be specified in the class declaration or per change.
      Substitutions in the class declaration are passed down to all included
      classes and all changes of the class. Substitutions that are passed down
      override substitutions with the same name in included classes and
      changes:</p><pre class="programlisting">foobar: RedHatEnterpriseServer ACCESS=snafu

RedHatEnterpriseServer:
  copy hosts.allow /etc/hosts.allow root root 644 ACCESS=ALL</pre></div></div><div class="section" title="1.2. Examples"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp66336"></a>1.2. Examples</h2></div></div></div><p>To illustrate how <span class="productname">Config5</span> is used we will
    create a feature to configure <code class="systemitem">ntpd</code>
    and deploy it to the host <code class="systemitem">sample</code> which is running <code class="systemitem">Red Hat Enterprise Linux 6</code> (<code class="systemitem">RHEL6</code>). In subsequent steps we will enhance
    the configuration step by step.</p><p>First we start by downloading and unpacking the
    <span class="productname">Config5</span> distribution:</p><pre class="screen">$ cd /tmp
$ wget https://github.com/isginf/config5/blob/master/releases/config5-latest.tgz?raw=true
$ tar zxf config5-latest.tgz
$ cd config5-?.?</pre><div class="section" title="1.2.1. The Basic ntp feature"><div class="titlepage"><div><div><h3 class="title"><a name="idp100880"></a>1.2.1. The Basic <code class="function">ntp</code> feature</h3></div></div></div><p>First we create a new feature called <code class="function">ntp</code> and
      <code class="filename">spec</code> file:</p><pre class="screen">$ cd deploy/features
$ mkdir ntp
$ cd ntp
$ vi spec</pre><p>The content of the <code class="filename">spec</code> file should look like
      this:</p><pre class="programlisting">RedHatEnterpriseWorkstation:
  copy ntp.conf /etc/ntp.conf root root 644</pre><p>This change will copy the file <code class="filename">ntp.conf</code> to
      <code class="filename">/etc/ntp.conf</code> for all target systems that are
      running <code class="systemitem">Red Hat Enterprise Linux
      Workstation</code> and set the permissions as indicated.</p><p>The only missing part is the file <code class="filename">ntp.conf</code>
      which is created in the same place as the <code class="filename">spec</code>
      file:</p><pre class="screen">$ vi ntp.conf</pre><p>We will use a simplified version of the default
      <code class="filename">/etc/ntp.conf</code> that ships with <code class="systemitem">RHEL6</code>:</p><pre class="programlisting">restrict default kod nomodify notrap nopeer noquery
restrict -6 default kod nomodify notrap nopeer noquery
restrict 127.0.0.1
restrict -6 ::1

server 0.rhel.pool.ntp.org
server 1.rhel.pool.ntp.org
server 2.rhel.pool.ntp.org</pre><p>Now we can deploy the configuration to the host <code class="systemitem">sample</code>:</p><pre class="screen">$ ( cd ../../.. ; tar cf /tmp/c5.tar deploy )
$ scp /tmp/c5.tar root@sample:/root/c5.tar
$ ssh root@sample "tar xf c5.tar ; deploy/bin/config5"</pre><p>The output of the last command will look like this:</p><pre class="screen">Date:               Fri Aug 24 09:54:47 2012
Host name:          sample
Architecture:       x86_64
OS:                 RedHatEnterpriseWorkstation
Release:            6.3
IP:                 127.0.0.1
FQHN:               sample.example.com
FQDN:               example.com
Root:               /
Stage:              production

Pass 1:
/etc/ntp.conf: file (ntp:RedHatEnterpriseWorkstation) - CHANGED

Done.</pre><p>If the last command is run again it will not change the file a
      second time and display the following output:</p><pre class="screen">$ ssh root@sample deploy/bin/config5
&#8230;
Root:               /
Stage:              production

Done.</pre></div><div class="section" title="1.2.2. Best Matching Class"><div class="titlepage"><div><div><h3 class="title"><a name="idp101200"></a>1.2.2. Best Matching Class</h3></div></div></div><p>When the configuration in a feature is applied,
      <span class="productname">Config5</span> will select the class that it applies
      using a list of classes generated from the system information. The first
      class that exists in the feature will be used.</p><p>The list of all classes that are checked on a system can be
      obtained by running <span class="command"><strong>config5 --report classorder</strong></span>. For
      host sample the output will look like this:</p><pre class="screen">$ ssh root@sample "deploy/bin/config5 --report classorder"
sample_RedHatEnterpriseWorkstation_6.3_x86_64
sample_RedHatEnterpriseWorkstation_6.3
sample_RedHatEnterpriseWorkstation_x86_64
sample_RedHatEnterpriseWorkstation
sample_x86_64
sample
RedHatEnterpriseWorkstation_6.3_x86_64
RedHatEnterpriseWorkstation_6.3
RedHatEnterpriseWorkstation_x86_64
RedHatEnterpriseWorkstation</pre><p>The class <code class="classname">RedHatEnterpriseWorkstation</code> from
      our example is the last one in the list. We could modify the
      <code class="filename">spec</code> file to look like this:</p><pre class="programlisting">sample:
  copy ntp.conf /etc/ntp.conf root root 644</pre><p>When this configuration is on the host sample the result is the
      same. When the same configuration is applied on any other system the
      feature would not be applied because no class matches (assuming that the
      system is not named <code class="systemitem">sample</code>).</p></div><div class="section" title="1.2.3. Adding Service Management to the ntp Feature"><div class="titlepage"><div><div><h3 class="title"><a name="idp122912"></a>1.2.3. Adding Service Management to the <code class="function">ntp</code>
      Feature</h3></div></div></div><p>The <code class="function">ntp</code> feature so far only copies the file.
      This is not enough because the <code class="systemitem">ntpd</code> service is not enabled by default and
      is not running. We will extend the feature to enable the service and
      start it:</p><pre class="programlisting">RedHatEnterpriseWorkstation:
  copy ntp.conf /etc/ntp.conf root root 644
  execute chkconfig ntpd on
  execute service ntpd start</pre><p>This will additionally execute the two shell commands
      <span class="command"><strong>chkconfig ntpd on</strong></span> and <span class="command"><strong>service ntpd
      start</strong></span>.</p><p>If we deploy this to <code class="systemitem">sample</code> like before the output will look
      like this:</p><pre class="screen">$ ssh root@sample "tar xf c5.tar ; deploy/bin/config5"
&#8230;

Pass 1:
run (ntp:RedHatEnterpriseWorkstation): chkconfig ntpd on
run (ntp:RedHatEnterpriseWorkstation): service ntpd restart

Done.</pre><p>The output remains the same if the <span class="command"><strong>config5</strong></span>
      command is run a second time. The service is enabled and started every
      time but we actually only want that to happen when
      <code class="filename">/etc/ntp.conf</code> changes. To change that we add a
      trigger flag to the lines that execute the shell commands:</p><pre class="programlisting">RedHatEnterpriseWorkstation:
  copy ntp.conf /etc/ntp.conf root root 644
  execute <span class="emphasis"><em>-t</em></span> root root chkconfig ntpd on
  execute <span class="emphasis"><em>-t</em></span> root root service ntpd restart</pre><p>Now the commands are only executed if the configuration file
      changes. When we deploy this to <code class="systemitem">sample</code> the output again shows no changes
      because the correct <code class="filename">/etc/ntp.conf</code> is already in
      place:</p><pre class="screen">$ ssh root@sample "tar xf c5.tar ; deploy/bin/config5"
&#8230;
Root:               /
Stage:              production

Done.</pre></div><div class="section" title="1.2.4. Improving the ntp Feature with Extensions"><div class="titlepage"><div><div><h3 class="title"><a name="idp123232"></a>1.2.4. Improving the <code class="function">ntp</code> Feature with
      Extensions</h3></div></div></div><p>Executing commands to enable and start the <code class="systemitem">ntpd</code> service works but there is a better
      way. <span class="productname">Config5</span> ships with a set of extensions
      and one of them is the <span class="productname">Services</span> extension
      which will manage system services using the <span class="command"><strong>chkconfig</strong></span>
      and the <span class="command"><strong>service</strong></span> commands. It does follow the overall
      principle of <span class="productname">Config5</span> that it only applies a
      change if necessary, i.e., only enable or start a service if it is not
      enabled or started yet.</p><p>The installation of the extension is simple:</p><pre class="screen">$ ( cd ../.. ; tar zxf ../extensions/service.tgz )
</pre><p>We modify the spec file and use the new
      <code class="function">service</code> change provided by the extension:</p><pre class="programlisting">RedHatEnterpriseWorkstation:
  copy ntp.conf /etc/ntp.conf root root 644
  service enable ntpd
  service start ntpd</pre><p>The trigger flags are gone which makes subtle difference for the
      systems administrator: Any time <span class="command"><strong>config5</strong></span> is run it
      will enable and start the service, even if an administrator has
      intentionally shut it down on a specific target system. For <code class="systemitem">ntpd</code> this is probably the right choice but
      for services that require maintenance such as <code class="systemitem">mysqld</code>, <code class="systemitem">httpd</code> or <code class="systemitem">samba</code> an administrator will probably not
      want these services to be suddenly started, especially if
      <span class="command"><strong>config5</strong></span> is run from <code class="systemitem">cron</code>. For these services it is better to at
      least trigger the service start on configuration file changes.</p><p>There is still one issue with the above spec file though. The
      <code class="systemitem">ntpd</code> service will not be
      restarted if the configuration file changes while the <code class="systemitem">ntpd</code> service is already running. The
      <span class="productname">Services</span> extension does intentionally not
      provide a <code class="function">restart</code> action but the original
      <span class="command"><strong>service ntpd restart</strong></span> command will do the job:</p><pre class="programlisting">RedHatEnterpriseWorkstation:
  copy ntp.conf /etc/ntp.conf root root 644
  execute -t root root service ntpd restart
  service enable ntpd
  service start ntpd</pre><p>The <code class="function">execute</code> change is inserted before the
      service changes to avoid a restart of the service because one of the
      <code class="function">service</code> changes needs to be applied.</p></div><div class="section" title="1.2.5. Installation vs. Production"><div class="titlepage"><div><div><h3 class="title"><a name="idp134592"></a>1.2.5. Installation vs. Production</h3></div></div></div><p>We will typically install Red Hat Enterprise Linux Workstation on
      a target system over the network using kickstart and at that time also
      run <span class="command"><strong>config5</strong></span> from a post script section to apply the
      configuration. However, the environment during installation is not
      exactly the same as when the system is running with the installed
      operating system. The installer has already configured the local time so
      we actually do not want to start or restart <code class="systemitem">ntpd</code> at this point.</p><p><span class="productname">Config5</span> predefines two
      <em class="firstterm">stages</em> for a target system,
      <code class="constant">installation</code> and <code class="constant">production</code>,
      the later being the default. We will tag the service start and restart
      changes to only be applied in the production stage:</p><pre class="programlisting">RedHatEnterpriseWorkstation:
  copy ntp.conf /etc/ntp.conf root root 644
  execute -t<span class="emphasis"><em>P</em></span> root root service ntpd restart
  service enable ntpd
  service -<span class="emphasis"><em>P</em></span> start ntpd</pre><p>To make this work we will run <span class="command"><strong>config5</strong></span> with the
      option <code class="option">--set stage=installation</code> in the kickstart post
      script.</p></div><div class="section" title="1.2.6. Adding Time Servers to the ntp Feature"><div class="titlepage"><div><div><h3 class="title"><a name="idp158464"></a>1.2.6. Adding Time Servers to the <code class="function">ntp</code>
      Feature</h3></div></div></div><p>We are actually running two time servers <code class="systemitem">ts1.example.com</code> and <code class="systemitem">ts2.example.com</code> that we would prefer
      to the default servers. Workstations will only use <code class="systemitem">ts1</code> while servers will use <code class="systemitem">ts2</code>. We could create two files, one for
      servers and one for workstations but we can do better using a template.
      We modify the file <code class="filename">ntp.conf</code> as follows:</p><pre class="programlisting">restrict default kod nomodify notrap nopeer noquery
restrict -6 default kod nomodify notrap nopeer noquery
restrict 127.0.0.1
restrict -6 ::1

[%- IF server %]
server [% server %]
[%- ELSE %]
server 0.rhel.pool.ntp.org
server 1.rhel.pool.ntp.org
server 2.rhel.pool.ntp.org
[%- END %]</pre><p>To generate two distinct files for servers and workstations we
      change the <code class="filename">spec</code> file to this:</p><pre class="programlisting">RedHatEnterpriseWorkstation: _ntp server=ts2.example.com
RedHatEnterpriseServer: _ntp server=ts1.example.com

_ntp:
  copy ntp.conf /etc/ntp.conf root root 644
  execute -tP root root service ntpd restart
  service enable ntpd
  service -P start ntpd</pre></div><div class="section" title="1.2.7. Dealing with Exceptions"><div class="titlepage"><div><div><h3 class="title"><a name="idp166272"></a>1.2.7. Dealing with Exceptions</h3></div></div></div><p>As time passes we encounter a few exceptions that our
      configuration has to cover:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The laptop <code class="systemitem">foobar</code>
          is configured as workstation but cannot contact the time servers
          because of the company firewall.</p></li><li class="listitem"><p>The user of workstation <code class="systemitem">snafu</code> wants it to be configured to
          use <code class="systemitem">ts2</code>.</p></li><li class="listitem"><p>A bug in <code class="systemitem">ntpd</code> on 64
          bit systems causes it to crash all the time. Until the bug is fixed
          we need a workaround.</p></li></ul></div><p>We change the <code class="filename">spec</code> file by adding the
      following two host-specific lines:</p><pre class="programlisting">foobar: RedHatEnterpriseWorkstation
snafu: RedHatEnterpriseWorkstation server=ts2.example.com</pre><p>The generated <code class="filename">/etc/ntp.conf</code> on <code class="systemitem">foobar</code> will contain the three time
      servers in the <code class="systemitem">ntp.org</code> pool.
      The same file on <code class="systemitem">snafu</code> will
      refer to <code class="systemitem">ts2.example.com</code>.</p><p>A suitable workaround for the crashes of <code class="systemitem">ntpd</code> could be to set the time with
      <span class="command"><strong>ntpdate</strong></span> and run it whenever
      <span class="command"><strong>config5</strong></span> runs: Adding the following snippet to the
      <code class="filename">spec</code> file does this:</p><pre class="programlisting">RedHatEnterpriseWorkstation_x86_64: _ntpdate server=ts1.example.com
RedHatEnterpriseServer_x86_64: _ntpdate server=ts2.example.com

_ntpdate:
  service -P stop ntpd
  service disable ntpd
  execute ntpdate [% server %]</pre><p>The workarounds for <code class="systemitem">foobar</code> and <code class="systemitem">snafu</code> need to be verified again at this
      point. Since <code class="systemitem">foobar</code> is an
      old laptop it will remain a 32 bit installation. The workstation
      <code class="systemitem">snafu</code> on the other hand
      could be reinstalled with either 32 or 64 bit so we make sure both work
      fine and add this line to the <code class="filename">spec</code> file:</p><pre class="programlisting">snafu_x86_64: RedHatEnterpriseWorkstation_x86_64 server=ts2.example.com</pre></div></div></div><div lang="en_US" class="chapter" title="Chapter 2. Configuration Data"><div class="titlepage"><div><div><h2 class="title"><a name="idp96048"></a>Chapter 2. Configuration Data</h2></div></div></div><p>The following sections provide in-depth explanation of the various
  concepts and the structure of configuration data that is deployed using
  <span class="productname">Config5</span>.</p><div class="section" title="2.1. Feature Set"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="conf.featureset"></a>2.1. Feature Set</h2></div></div></div><p>Configuration data that is applied using
    <span class="productname">Config5</span> is organized in a <em class="firstterm">feature
    set</em>. A feature set is nothing more than a directory containing
    <a class="link" href="#conf.features" title="2.2. Features">features</a> (see <a class="xref" href="#conf.features" title="2.2. Features">Section 2.2, &#8220;Features&#8221;</a>).</p><p>By default <span class="productname">Config5</span> has one feature set
    that is located in a directory named <code class="filename">features</code> in the same directory as the
    <code class="filename">bin</code> directory containing the
    <span class="command"><strong>config5</strong></span> script: </p><pre class="screen">$ ls
deploy  doc  example  util
$ ls deploy/
bin  etc  features  lib
$ ls deploy/bin
config5</pre><p> There are two ways to customize the location of the default
    feature set:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The directory <code class="filename">features</code>
        can be replaced by a symbolic link that points to the real location of
        the feature set directory. The directory the symbolic link links to
        must be available on all target systems that are going to be
        managed.</p></li><li class="listitem"><p>The directory name can be changed by customizing the
        <span class="productname">Config5</span> settings (see <a class="xref" href="#cust.settings" title="7.3. Settings Reference">Section 7.3, &#8220;Settings Reference&#8221;</a>).</p></li></ul></div></div><div class="section" title="2.2. Features"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="conf.features"></a>2.2. Features</h2></div></div></div><p>The actual configuration data is organized in one or more
    <em class="firstterm">features</em> in the <a class="link" href="#conf.featureset" title="2.1. Feature Set">feature set</a> (see <a class="xref" href="#conf.featureset" title="2.1. Feature Set">Section 2.1, &#8220;Feature Set&#8221;</a>). Each feature is again a directory containing
    a <em class="firstterm">specification file</em>. The default name for the file
    is <code class="filename">spec</code> but that can be changed (see <a class="xref" href="#cust.settings" title="7.3. Settings Reference">Section 7.3, &#8220;Settings Reference&#8221;</a>):</p><pre class="screen">$ ls deploy/features
autofs  firewall  ssh  sshd
$ ls deploy/features/sshd
sshd_config spec</pre><p>The specification file contains a number of <a class="link" href="#conf.classes" title="2.3. Classes">class definitions</a>.</p></div><div class="section" title="2.3. Classes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="conf.classes"></a>2.3. Classes</h2></div></div></div><p><em class="firstterm">Classes</em> group together individual the <a class="link" href="#conf.featureset" title="2.1. Feature Set">changes</a> (see <a class="xref" href="#conf.changes" title="2.4. Changes">Section 2.4, &#8220;Changes&#8221;</a>). The general syntax is the following:</p><pre class="programlisting">class: [referenced_class&#8230;] [key=value&#8230;]</pre><p>Any string of character excluding white space is suitable as a class
    name. Classes that are not intended to match (see <a class="xref" href="#cust.classes" title="7.3.8. Class Match Order">Section 7.3.8, &#8220;Class Match Order&#8221;</a>) can still be referenced by other classes.
    Typically these classes have a naming convention that distinguishes them
    from classes that can be selected as best match, for instance by prefixing
    them with an underscore.</p><div class="section" title="2.3.1. Substitutions"><div class="titlepage"><div><div><h3 class="title"><a name="conf.class.subst"></a>2.3.1. Substitutions</h3></div></div></div><p>One of the strengths of <span class="productname">Config5</span> is its
      capability to create config files from templates using the
      <span class="productname">Template Toolkit</span> <a class="xref" href="#bib.templatetoolkit">[5]</a>. Command lines run by the
      <code class="function">execute</code> change are also processed using Template
      Toolkit.</p><p>Substitutions are always specified as <code class="code">key=value</code> pair.
      If <code class="code">value</code> contains spaces the pair must be quoted.
      Substitutions can be specified in two places:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In class definitions. Substitutions are passed to all changes
          of the class and all included classes.</p></li><li class="listitem"><p>In <code class="function">copy</code> or <code class="function">append</code>
          changes.</p></li></ul></div><p>Substitutions that are passed down override substitutions in
      changes or included classes. Each substitution is a variable in
      <span class="productname">Template Toolkit</span> with the name
      <code class="code">key</code> and <code class="code">value</code> as value.</p><div class="example"><a name="idp223152"></a><p class="title"><b>Example 2.1. Substitution Specification</b></p><div class="example-contents"><pre class="programlisting">RedHatEnterpriseServer: _sshd permitroot=1
RedHatEnterpriseWorkstation: _sshd permitroot=0

_sshd:
  copy sshd_config /etc/sshd/sshd_config root root 600

sample:
  copy sshd_config.test /etc/sshd/sshd_config root root 600 permitroot=1</pre></div></div><br class="example-break"><div class="section" title="2.3.1.1. Predefined Substitutions"><div class="titlepage"><div><div><h4 class="title"><a name="idp224640"></a>2.3.1.1. Predefined Substitutions</h4></div></div></div><p>A set of substitutions are predefined and relate to information
        about the target system and the configuration:</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th align="center">Variable</th><th align="center">Description</th></tr></thead><tbody><tr><td><code class="varname">auto_base</code></td><td>The base directory of
                <span class="productname">Config5</span> (parent directory of the
                directory containing the running <span class="command"><strong>config5</strong></span>
                script)</td></tr><tr><td><code class="varname">auto_class</code></td><td>The name of the matching class of the
                <code class="function">copy</code> or <code class="function">append</code>
                change</td></tr><tr><td><code class="varname">auto_class_lc</code></td><td>Same as <code class="varname">auto_class</code> but all lower
                case</td></tr><tr><td><code class="varname">auto_feature</code></td><td>The name of the feature of the
                <code class="function">copy</code> or <code class="function">append</code>
                change</td></tr><tr><td><code class="varname">auto_dynamic_rnd</code></td><td>32 bit random number (changes every time
                <span class="command"><strong>config5</strong></span> is run)</td></tr><tr><td><code class="varname">auto_static_rnd</code></td><td>32 bit random number (changed only when the
                <code class="varname">host</code> system item changes)</td></tr><tr><td><code class="varname">auto_program_version</code></td><td>The version of the
                <span class="productname">Config5</span></td></tr></tbody></table></div><p>Additionally the value of all system information items (see
        <a class="xref" href="#sysinfo.items" title="6.2. System Information Items">Section 6.2, &#8220;System Information Items&#8221;</a>) is available as
        <code class="varname">info_<em class="replaceable"><code>item</code></em></code> variable. For
        list type system information items a variable
        info_<em class="replaceable"><code>item</code></em>_<em class="replaceable"><code>entry</code></em>
        is set to <code class="constant">1</code> for each entry of the list. Both
        <em class="replaceable"><code>item</code></em> and <em class="replaceable"><code>entry</code></em>
        are converted to lower case.</p><p>All predefined substitutions can be overloaded at class or
        change level.</p></div></div><div class="section" title="2.3.2. Best Match"><div class="titlepage"><div><div><h3 class="title"><a name="cust.class.match"></a>2.3.2. Best Match</h3></div></div></div><p>For each feature a class is selected and its changes are
      processed. The class is selected according to a prioritized list of
      class names that are generated from the available system information
      items. The first class that is found is used. The feature is ignored if
      no class matches.</p><p>See <a class="xref" href="#cust.classes" title="7.3.8. Class Match Order">Section 7.3.8, &#8220;Class Match Order&#8221;</a> for information about the
      default list.</p></div></div><div class="section" title="2.4. Changes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="conf.changes"></a>2.4. Changes</h2></div></div></div><p>The <span class="emphasis"><em><em class="firstterm">changes</em></em></span> specify
    individual changes to the system. Each change is identified by a keyword,
    usually a verb or noun and followed by parameters.</p><p>Extensions can define additional changes with other keywords.</p><div class="section" title="2.4.1. Flags"><div class="titlepage"><div><div><h3 class="title"><a name="conf.changes.flags"></a>2.4.1. Flags</h3></div></div></div><p>Some aspects of a change can be modified using a set of
      <em class="firstterm">flags</em>. Flags are indicated using a leading minus
      sign. The flags are optional but if present must be directly after the
      keyword.</p><p>The following common flags are handled the same way for all
      changes, both core changes and changes from extensions:</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th align="center">Flag</th><th align="center">Description</th></tr></thead><tbody><tr><td><code class="option">-0</code> to <code class="option">-9</code></td><td>Sets the pass in which the change is applied</td></tr><tr><td><code class="option">-b</code></td><td>Data is binary and should not be processed with the
              <span class="productname">Template Toolkit</span></td></tr><tr><td><code class="option">-i</code></td><td>Files are changed in-place</td></tr><tr><td><code class="option">-n</code></td><td>All errors are ignored</td></tr><tr><td><code class="option">-t</code></td><td>Change is only performed if another change in the same
              class was applied</td></tr><tr><td><code class="option">-T</code></td><td>Change is only performed if another change in the same
              feature was applied</td></tr></tbody></table></div><p>Stages (see <a class="xref" href="#app.stage" title="3.2.2. Stages">Section 3.2.2, &#8220;Stages&#8221;</a>) are also specified as
      flags.</p></div><div class="section" title="2.4.2. Parameters"><div class="titlepage"><div><div><h3 class="title"><a name="conf.chg.param"></a>2.4.2. Parameters</h3></div></div></div><p>Every change has its own set of mandatory and optional parameters.
      The core changes share some common parameters.</p><p>The following subsections describe common parameters that are
      handled the same way for all changes, both core changes and changes from
      extension.</p><div class="section" title="2.4.2.1. Source File"><div class="titlepage"><div><div><h4 class="title"><a name="idp275904"></a>2.4.2.1. Source File</h4></div></div></div><p>The <em class="parameter"><code>source</code></em> file may be specified as path
        relative to the feature directory or an absolute path on the target
        system.</p></div><div class="section" title="2.4.2.2. Destination Path"><div class="titlepage"><div><div><h4 class="title"><a name="idp277584"></a>2.4.2.2. Destination Path</h4></div></div></div><p>The <em class="parameter"><code>destination</code></em> path for changes related
        to the file system must always be absolute.</p></div><div class="section" title="2.4.2.3. User"><div class="titlepage"><div><div><h4 class="title"><a name="idp279120"></a>2.4.2.3. User</h4></div></div></div><p>The <em class="parameter"><code>user</code></em> for a file (symbolic link, etc.)
        or directory can be specified as a <code class="systemitem">uname</code> or a numeric <code class="systemitem">uid</code>.</p><p>For an existing file or directory it is possible to use a minus
        sign as user in which case the current <code class="systemitem">user</code> of the file is unchanged. If the
        file does not exist the <code class="systemitem">user</code>
        of the file is set to <code class="systemitem">root</code>
        (<code class="systemitem">uid</code>
        <code class="constant">0</code>).</p></div><div class="section" title="2.4.2.4. Group"><div class="titlepage"><div><div><h4 class="title"><a name="idp286704"></a>2.4.2.4. Group</h4></div></div></div><p>The <em class="parameter"><code>group</code></em> for a file (symbolic link,
        etc.) or directory can be specified as a group name or a numeric
        <code class="systemitem">gid</code>.</p><p>For an existing file or directory it is possible to use a minus
        sign as <code class="systemitem">group</code> in which case
        the current <code class="systemitem">group</code> of the
        file is unchanged. If the file does not exist the <code class="systemitem">group</code> of the file is set to <code class="systemitem">root</code> (<code class="systemitem">gid</code> <code class="constant">0</code>).</p></div><div class="section" title="2.4.2.5. Mode"><div class="titlepage"><div><div><h4 class="title"><a name="idp291168"></a>2.4.2.5. Mode</h4></div></div></div><p>The <em class="parameter"><code>mode</code></em> for a file or directory is
        specified as an octal number.</p><p>If a minus sign is used as mode then the current mode of the
        file is unchanged. If the file does not exist then the mode is set to
        <code class="constant">0644</code>.</p></div><div class="section" title="2.4.2.6. SELinux Context"><div class="titlepage"><div><div><h4 class="title"><a name="conf.chg.param.selinux"></a>2.4.2.6. SELinux Context</h4></div></div></div><p>For files (directories, symbolic links, etc.) the core changes
        accept an optional SELinux context if SELinux support is activated
        (see <a class="xref" href="#cust.settings" title="7.3. Settings Reference">Section 7.3, &#8220;Settings Reference&#8221;</a>). A context can be specified in
        three formats:</p><div class="variablelist"><dl><dt><span class="term">type</span></dt><dd><p>SELinux type, expands to
              <code class="constant">system_u:object_r:</code><em class="replaceable"><code>type</code></em><code class="constant">:s0</code>.</p></dd><dt><span class="term">user:role:type</span></dt><dd><p>SELinux user, role and type, expands to
              <code class="constant"><em class="replaceable"><code>user</code></em>:<em class="replaceable"><code>role</code></em>:</code><em class="replaceable"><code>type</code></em><code class="constant">:s0</code>.</p></dd><dt><span class="term">user:role:type:range</span></dt><dd><p>Complete SELinux context.</p></dd></dl></div><p>The core changes that accept an optional SELinux context will
        keep the current context of an existing file. If a file is created
        then the context is defined by the SELinux policy.</p></div></div><div class="section" title="2.4.3. Core Changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp308464"></a>2.4.3. Core Changes</h3></div></div></div><p>The following subsections explain the core changes that are
      natively supported by <span class="productname">Config5</span>, i.e., are not
      provided by an extension.</p><div class="section" title="2.4.3.1. Copy File"><div class="titlepage"><div><div><h4 class="title"><a name="idp310320"></a>2.4.3.1. Copy File</h4></div></div></div><p>The <em class="firstterm">copy</em> change is used to copy a regular
        file.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Synopsis</td><td><code class="function">copy</code> [<code class="option">-bintT</code>]
                <em class="parameter"><code>source</code></em>
                <em class="parameter"><code>destination</code></em> <em class="parameter"><code>user</code></em>
                <em class="parameter"><code>group</code></em> <em class="parameter"><code>mode</code></em>
                [<em class="parameter"><code>context</code></em>]
                [<em class="parameter"><code>key=value</code></em>&#8230;]</td></tr></tbody></table></div><p>The parameters <em class="parameter"><code>source</code></em>,
        <em class="parameter"><code>destination</code></em>, <em class="parameter"><code>user</code></em>,
        <em class="parameter"><code>group</code></em>, <em class="parameter"><code>mode</code></em> and
        <em class="parameter"><code>context</code></em> are common parameters (see <a class="xref" href="#conf.chg.param" title="2.4.2. Parameters">Section 2.4.2, &#8220;Parameters&#8221;</a>).</p><p>One or more substitutions can be appended as
        <em class="parameter"><code>key=value</code></em> pairs (see <a class="xref" href="#conf.class.subst" title="2.3.1. Substitutions">Section 2.3.1, &#8220;Substitutions&#8221;</a>). If the <code class="option">-b</code> flag is used
        the file is treated as binary and no substitutions are done.</p><p>The content of a file (after applying all
        <code class="function">append</code> changes for the same file),
        <em class="parameter"><code>user</code></em>, <em class="parameter"><code>group</code></em>,
        <em class="parameter"><code>mode</code></em> and <em class="parameter"><code>context</code></em> are
        individually compared to the destination file and copied or set when
        different.</p><p>If <em class="parameter"><code>destination</code></em> exists and is not a file
        then it will be deleted before creating the file.</p><div class="example"><a name="idp328464"></a><p class="title"><b>Example 2.2. Copy File</b></p><div class="example-contents"><pre class="programlisting">sample:
  copy sshd_config /etc/sshd/sshd_config root root 600 permitroot=1
  copy authorised_keys /root/.ssh/authorized_keys root root 644 ssh_home_t</pre></div></div><br class="example-break"></div><div class="section" title="2.4.3.2. Truncate File"><div class="titlepage"><div><div><h4 class="title"><a name="conf.chg.truncate"></a>2.4.3.2. Truncate File</h4></div></div></div><p>The <em class="firstterm">truncate</em> change is used to create a
        empty file.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Synopsis</td><td><code class="function">truncate</code> [<code class="option">-intT</code>]
                <em class="parameter"><code>destination</code></em> <em class="parameter"><code>user</code></em>
                <em class="parameter"><code>group</code></em> <em class="parameter"><code>mode</code></em>
                [<em class="parameter"><code>context</code></em>]</td></tr></tbody></table></div><p>The parameters <em class="parameter"><code>source</code></em>,
        <em class="parameter"><code>destination</code></em>, <em class="parameter"><code>user</code></em>,
        <em class="parameter"><code>group</code></em>, <em class="parameter"><code>mode</code></em> and
        <em class="parameter"><code>context</code></em> are common parameters (see <a class="xref" href="#conf.chg.param" title="2.4.2. Parameters">Section 2.4.2, &#8220;Parameters&#8221;</a>).</p><p>The content of a file (after applying all
        <code class="function">append</code> changes for the same file),
        <em class="parameter"><code>user</code></em>, <em class="parameter"><code>group</code></em>,
        <em class="parameter"><code>mode</code></em> and <em class="parameter"><code>context</code></em> are
        individually compared to the destination file and copied or set when
        different.</p><p>If <em class="parameter"><code>destination</code></em> exists and is not a file
        then it will be deleted before creating the file.</p><div class="example"><a name="idp346448"></a><p class="title"><b>Example 2.3. Truncate File</b></p><div class="example-contents"><pre class="programlisting">sample:
  truncate /etc/rc.d/rc.local root root 755</pre></div></div><br class="example-break"></div><div class="section" title="2.4.3.3. Append to File"><div class="titlepage"><div><div><h4 class="title"><a name="conf.chg.append"></a>2.4.3.3. Append to File</h4></div></div></div><p>The <em class="firstterm">append</em> change is used to append data
        to a file.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Synopsis</td><td><code class="function">append</code> [<code class="option">-b</code>]
                <em class="parameter"><code>source</code></em>
                <em class="parameter"><code>destination</code></em>
                [<em class="parameter"><code>key=value</code></em>&#8230;]</td></tr></tbody></table></div><p>The parameters <em class="parameter"><code>source</code></em> and
        <em class="parameter"><code>destination</code></em> are common parameters (see <a class="xref" href="#conf.chg.param" title="2.4.2. Parameters">Section 2.4.2, &#8220;Parameters&#8221;</a>).</p><p>One or more substitutions can be appended as
        <em class="parameter"><code>key=value</code></em> pairs (see <a class="xref" href="#conf.class.subst" title="2.3.1. Substitutions">Section 2.3.1, &#8220;Substitutions&#8221;</a>). If the <code class="option">-b</code> flag is used
        the appended data is treated as binary and no substitutions are
        done.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>To append to a file it must be copied or truncated. A
          corresponding copy or truncate change must be present in exactly one
          of the features.</p></div><div class="example"><a name="idp360640"></a><p class="title"><b>Example 2.4. Append to File</b></p><div class="example-contents"><pre class="programlisting">sample:
  append rc.local /etc/rc.d/rc.local </pre></div></div><br class="example-break"></div><div class="section" title="2.4.3.4. Create Directory"><div class="titlepage"><div><div><h4 class="title"><a name="conf.chg.directory"></a>2.4.3.4. Create Directory</h4></div></div></div><p>The <em class="firstterm">directory</em> change is used to create a
        directory.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Synopsis</td><td><code class="function">directory</code> [<code class="option">-ntT</code>]
                <em class="parameter"><code>destination</code></em> <em class="parameter"><code>user</code></em>
                <em class="parameter"><code>group</code></em> <em class="parameter"><code>mode</code></em>
                [<em class="parameter"><code>context</code></em>]</td></tr></tbody></table></div><p>The parameters <em class="parameter"><code>source</code></em>,
        <em class="parameter"><code>destination</code></em>, <em class="parameter"><code>user</code></em>,
        <em class="parameter"><code>group</code></em>, <em class="parameter"><code>mode</code></em> and
        <em class="parameter"><code>context</code></em> are common parameters (see <a class="xref" href="#conf.chg.param" title="2.4.2. Parameters">Section 2.4.2, &#8220;Parameters&#8221;</a>).</p><p>The <em class="parameter"><code>user</code></em>, <em class="parameter"><code>group</code></em>,
        <em class="parameter"><code>mode</code></em> and <em class="parameter"><code>context</code></em> are
        individually compared to the destination path and copied or set when
        different.</p><p>If <em class="parameter"><code>destination</code></em> exists and is not a
        directory then it will be deleted before creating the file.</p><div class="example"><a name="idp377600"></a><p class="title"><b>Example 2.5. Create Directory</b></p><div class="example-contents"><pre class="programlisting">sample:
  directory /local root root 1777</pre></div></div><br class="example-break"></div><div class="section" title="2.4.3.5. Create Link"><div class="titlepage"><div><div><h4 class="title"><a name="conf.chg.link"></a>2.4.3.5. Create Link</h4></div></div></div><p>The <em class="firstterm">link</em> change is used to create a
        (hard) link.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Synopsis</td><td><code class="function">link</code> [<code class="option">-ntT</code>]
                <em class="parameter"><code>source</code></em>
                <em class="parameter"><code>destination</code></em></td></tr></tbody></table></div><p>The parameter <em class="parameter"><code>destination</code></em> is a common
        parameter (see <a class="xref" href="#conf.chg.param" title="2.4.2. Parameters">Section 2.4.2, &#8220;Parameters&#8221;</a>). The
        <em class="parameter"><code>source</code></em> parameter is like the
        <em class="parameter"><code>destination</code></em> parameter an absolute path in the
        file system of the target system.</p><p>If <em class="parameter"><code>destination</code></em> exists and its inode or
        device id is different then it will be deleted before creating the
        link.</p><div class="example"><a name="idp389088"></a><p class="title"><b>Example 2.6. Create Link</b></p><div class="example-contents"><pre class="programlisting">sample:
  link /tmp/a /tmp/b</pre></div></div><br class="example-break"></div><div class="section" title="2.4.3.6. Create Symbolic Link"><div class="titlepage"><div><div><h4 class="title"><a name="conf.chg.symlink"></a>2.4.3.6. Create Symbolic Link</h4></div></div></div><p>The <em class="firstterm">symlink</em> change is used to create a
        symbolic link.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Synopsis</td><td><code class="function">symlink</code> [<code class="option">-bntT</code>]
                <em class="parameter"><code>value</code></em>
                <em class="parameter"><code>destination</code></em> <em class="parameter"><code>user</code></em>
                <em class="parameter"><code>group</code></em>
                [<em class="parameter"><code>context</code></em>]</td></tr></tbody></table></div><p>The parameters <em class="parameter"><code>destination</code></em>,
        <em class="parameter"><code>user</code></em>, <em class="parameter"><code>group</code></em> and
        <em class="parameter"><code>context</code></em> are common parameters (see <a class="xref" href="#conf.chg.param" title="2.4.2. Parameters">Section 2.4.2, &#8220;Parameters&#8221;</a>). The parameter <code class="filename">value</code>
        is usually a path but may be set to any string.</p><p>The substitutions defined for the class or inherited from
        including classes are applied to <code class="filename">value</code> unless the
        <code class="option">-b</code> flag is used.</p><p>The content of the symbolic link, <em class="parameter"><code>user</code></em>,
        <em class="parameter"><code>group</code></em> and <em class="parameter"><code>context</code></em> are
        individually compared to the destination path and set when
        different.</p><p>If <em class="parameter"><code>destination</code></em> exists and is not a
        symbolic link then it will be deleted before creating the symbolic
        link.</p><div class="example"><a name="idp406016"></a><p class="title"><b>Example 2.7. Create Symbolic Link</b></p><div class="example-contents"><pre class="programlisting">sample:
  copy ca.pem /etc/openldap/cacerts/ca.pem root root 644
  symlink ca.pem /etc/openldap/cacerts/12345678.0 root root</pre></div></div><br class="example-break"></div><div class="section" title="2.4.3.7. Change Properties"><div class="titlepage"><div><div><h4 class="title"><a name="idp407312"></a>2.4.3.7. Change Properties</h4></div></div></div><p>The <em class="firstterm">properties</em> change is used to change
        the properties of an existing file.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Synopsis</td><td><code class="function">properties</code> [<code class="option">-ntT</code>]
                <em class="parameter"><code>destination</code></em> <em class="parameter"><code>user</code></em>
                <em class="parameter"><code>group</code></em> <em class="parameter"><code>mode</code></em>
                [<em class="parameter"><code>context</code></em>]
                [<em class="parameter"><code>key=value</code></em>&#8230;]</td></tr></tbody></table></div><p>The parameters <em class="parameter"><code>destination</code></em>,
        <em class="parameter"><code>user</code></em>, <em class="parameter"><code>group</code></em>,
        <em class="parameter"><code>mode</code></em> and <em class="parameter"><code>context</code></em> are
        common parameters (see <a class="xref" href="#conf.chg.param" title="2.4.2. Parameters">Section 2.4.2, &#8220;Parameters&#8221;</a>).</p><p>The <em class="parameter"><code>user</code></em>, <em class="parameter"><code>group</code></em>,
        <em class="parameter"><code>mode</code></em> and <em class="parameter"><code>context</code></em> are
        individually compared to the destination file and set when
        different.</p><div class="example"><a name="idp420096"></a><p class="title"><b>Example 2.8. Change Properties</b></p><div class="example-contents"><pre class="programlisting">sample:
  properties /var/log/messages - - 644</pre></div></div><br class="example-break"></div><div class="section" title="2.4.3.8. Remove"><div class="titlepage"><div><div><h4 class="title"><a name="conf.chg.remove"></a>2.4.3.8. Remove</h4></div></div></div><p>The <em class="firstterm">remove</em> change is used to delete a
        file, directory, symbolic link, link or special file.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Synopsis</td><td><code class="function">remove</code> [<code class="option">-ntT</code>]
                <em class="parameter"><code>destination</code></em></td></tr></tbody></table></div><p>The parameters <em class="parameter"><code>destination</code></em> is a common
        parameter (see <a class="xref" href="#conf.chg.param" title="2.4.2. Parameters">Section 2.4.2, &#8220;Parameters&#8221;</a>).</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>It is currently not possible to recursively remove a directory
          with the <code class="function">remove</code> change. Run <span class="command"><strong>rm
          -rf</strong></span> using the <code class="function">execute</code> change instead
          (see <a class="xref" href="#conf.chg.execute" title="2.4.3.9. Execute Shell Command Line">Section 2.4.3.9, &#8220;Execute Shell Command Line&#8221;</a>).</p></div><div class="example"><a name="idp432144"></a><p class="title"><b>Example 2.9. Remove</b></p><div class="example-contents"><pre class="programlisting">sample:
  remove /etc/openldap/cacerts/ca.pem
  remove /etc/openldap/cacerts/12345678.0
  remove /etc/openldap/cacerts</pre></div></div><br class="example-break"></div><div class="section" title="2.4.3.9. Execute Shell Command Line"><div class="titlepage"><div><div><h4 class="title"><a name="conf.chg.execute"></a>2.4.3.9. Execute Shell Command Line</h4></div></div></div><p>The <em class="firstterm">execute</em> change is used to execute a
        shell command line.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Synopsis</td><td><code class="function">execute</code> [<code class="option">-bntT</code>]
                &#8230;</td></tr></tbody></table></div><p>The entire rest of the line is executed as a shell command line.
        The line is executed as the user and group of the running
        <span class="command"><strong>config5</strong></span> process which is usually both <code class="systemitem">root</code>.</p><p>The substitutions defined for the class or inherited from
        including classes are applied to the command line before executing it
        unless the <code class="option">-b</code> flag is used.</p><p>The execute change is always performed unless the
        <code class="option">-t</code> or <code class="option">-T</code> flag is used but no earlier
        change triggers it.</p><div class="example"><a name="idp443408"></a><p class="title"><b>Example 2.10. Execute Shell Command Line</b></p><div class="example-contents"><pre class="programlisting">sample:
  execute service sssd stop ; rm -f rm -f /var/lib/sss/db/* ; service sssd start</pre></div></div><br class="example-break"></div></div></div></div><div lang="en_US" class="chapter" title="Chapter 3. Configuration Application"><div class="titlepage"><div><div><h2 class="title"><a name="idp308720"></a>Chapter 3. Configuration Application</h2></div></div></div><p>Understanding how the configuration is applied to a system is
  essential and outlined in this chapter.</p><div class="section" title="3.1. Configuration Processing"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="app.proc"></a>3.1. Configuration Processing</h2></div></div></div><p>The information in the feature set is processed in a well defined
    order:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>All features are processed in alphabetical order.</p></li><li class="listitem"><p>Starting with the class that matches best in each feature (if
        there is any, see <a class="xref" href="#cust.class.match" title="2.3.2. Best Match">Section 2.3.2, &#8220;Best Match&#8221;</a>) the referenced
        classes are processed first from left to right. Classes are processed
        once every time they are referenced which may be more than
        once.</p></li><li class="listitem"><p>In each class that is processed the changes are processed from
        top to bottom.</p></li></ul></div><p>Some changes are applied in the order they are processed (see <a class="xref" href="#app.changes" title="3.3.3. Changes">Section 3.3.3, &#8220;Changes&#8221;</a>).</p></div><div class="section" title="3.2. Environment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="app.env"></a>3.2. Environment</h2></div></div></div><div class="section" title="3.2.1. Root Directory"><div class="titlepage"><div><div><h3 class="title"><a name="app.root"></a>3.2.1. Root Directory</h3></div></div></div><p>The root directory that is used when Config5 applies the
      configuration on a target system is typically /. The root directory can
      be changed by setting the root system information item, for instance
      using the <code class="option">--set</code> command line option of
      <span class="command"><strong>config5</strong></span>.</p><p>All core changes support a different root directory. All changes
      except the execute change will automatically prepend the root directory
      to all absolute source or destination paths. The execute change is
      executed but requires the use of substitution by inserting
      <em class="replaceable"><code>[% info_root %]</code></em> where needed.</p></div><div class="section" title="3.2.2. Stages"><div class="titlepage"><div><div><h3 class="title"><a name="app.stage"></a>3.2.2. Stages</h3></div></div></div><p>A target system may require different configurations throughout
      its life cycle. <span class="productname">Config5</span> supports this in a
      generic fashion by defining a set of <em class="firstterm">stages</em>. The
      default configuration defines the following two stages:</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="left">Stage</th><th align="left">Flag</th><th align="left">Description</th></tr></thead><tbody><tr><td><code class="constant">installation</code></td><td><code class="option">-I</code></td><td>System is being installed.</td></tr><tr><td><code class="constant">production</code></td><td><code class="option">-P</code></td><td>System is up and running (default).</td></tr></tbody></table></div><p>Individual changes can be selectively enabled for only some stages
      by specifying the stages as flags (see <a class="xref" href="#conf.changes.flags" title="2.4.1. Flags">Section 2.4.1, &#8220;Flags&#8221;</a>). If no stage is specified this means
      that the change is applied in any stage.</p><p>The stage can be set using the <code class="option">--set</code> command line
      option of <span class="command"><strong>config5</strong></span>.</p></div></div><div class="section" title="3.3. Configuration Application"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp472720"></a>3.3. Configuration Application</h2></div></div></div><p>The configuration is applied after processing in a structured
    manner.</p><div class="section" title="3.3.1. Passes"><div class="titlepage"><div><div><h3 class="title"><a name="app.passes"></a>3.3.1. Passes</h3></div></div></div><p>The configuration is applied in ten
      <span class="emphasis"><em><em class="firstterm">passes</em></em></span>. The pass in which a
      change is applied can be specified with the flags <code class="option">-0</code> to
      <code class="option">-9</code> for each change. The default pass is
      <code class="constant">1</code>.</p><p>Applying the configuration in multiple passes can be helpful in a
      couple of scenarios:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Changes that must be done before or after everything else can
          be placed in an earlier or later pass.</p></li><li class="listitem"><p>Configuration files that are generated by a command that
          writes a temporary file which is copied to the final
          destination.</p></li></ul></div></div><div class="section" title="3.3.2. Phases"><div class="titlepage"><div><div><h3 class="title"><a name="app.phases"></a>3.3.2. Phases</h3></div></div></div><p>In each pass the relevant changes are applied in different phases.
      Currently the following phases are defined and processed in this
      order:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Install or remove packages</p></li><li class="listitem"><p>Delete files and directories</p></li><li class="listitem"><p>Create files and directories</p></li><li class="listitem"><p>Modify files and directories</p></li><li class="listitem"><p>Configure system</p></li><li class="listitem"><p>Execute commands</p></li></ol></div><p>Each type of change is applied in exactly one phase:</p><div class="variablelist"><dl><dt><span class="term">Install or remove packages</span></dt><dd><p>(not used by the core changes)</p></dd><dt><span class="term">Delete files and directories</span></dt><dd><p><code class="function">remove</code></p></dd><dt><span class="term">Create files and directories</span></dt><dd><p><code class="function">append</code>, <code class="function">copy</code>,
            <code class="function">directory</code>, <code class="function">link</code>,
            <code class="function">symlink</code>, <code class="function">truncate</code></p></dd><dt><span class="term">Modify files and directories</span></dt><dd><p>(not used by the core changes)</p></dd><dt><span class="term">Configure system</span></dt><dd><p>(not used by the core changes)</p></dd><dt><span class="term">Execute commands</span></dt><dd><p><code class="function">execute</code>,
            <code class="function">service</code></p></dd></dl></div><p>For each phase the order in which changes are applied is also
      defined:</p><div class="variablelist"><dl><dt><span class="term">Install or remove packages</span></dt><dd><p>All changes are applied in the order the changes were
            processed (see <a class="xref" href="#app.proc" title="3.1. Configuration Processing">Section 3.1, &#8220;Configuration Processing&#8221;</a>).</p></dd><dt><span class="term">Delete files and directories</span></dt><dd><p>All changes are ordered according to the <span class="emphasis"><em>reverse
            alphabetical order</em></span> of the destination path and applied
            in this order. Files are deleted before their parent
            directory.</p></dd><dt><span class="term">Create files and directories</span></dt><dd><p>All changes are ordered according to the
            <span class="emphasis"><em>alphabetical order</em></span> of the destination path
            and applied in this order. Directories are created before files
            they contain.</p></dd><dt><span class="term">Modify files and directories</span></dt><dd><p>All changes are ordered according to the
            <span class="emphasis"><em>alphabetical order</em></span> of the destination path
            and applied in this order. Directories are created before files
            they contain.</p></dd><dt><span class="term">Configure system</span></dt><dd><p>All changes are applied in the order the changes were
            processed (see <a class="xref" href="#app.proc" title="3.1. Configuration Processing">Section 3.1, &#8220;Configuration Processing&#8221;</a>).</p></dd><dt><span class="term">Execute commands</span></dt><dd><p>All changes are applied in the order the changes were
            processed (see <a class="xref" href="#app.proc" title="3.1. Configuration Processing">Section 3.1, &#8220;Configuration Processing&#8221;</a>).</p></dd></dl></div><div class="section" title="3.3.2.1. Data Generation"><div class="titlepage"><div><div><h4 class="title"><a name="app.generation"></a>3.3.2.1. Data Generation</h4></div></div></div><p>Before the files are copied in phase <code class="constant">3</code> of
        each pass, the content of files are generated. This is done on two
        steps:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>The source data of all append and copy changes that are not
            marked as binary using the <code class="option">-b</code> flag is processed
            using Template Toolkit.</p></li><li class="listitem"><p>The processed data from all <code class="function">append</code>
            changes is appended to the processed data of the respective
            <code class="function">copy</code> or <code class="function">truncate</code>
            changes.</p></li></ol></div><p>The processed data is not written to the destination files yet
        but kept in memory for use during the actual configuration
        application.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>Copying large files may use up a lot of memory because of the
          intermediate copy in memory.</p></div></div></div><div class="section" title="3.3.3. Changes"><div class="titlepage"><div><div><h3 class="title"><a name="app.changes"></a>3.3.3. Changes</h3></div></div></div><p>For each change that is applied <span class="command"><strong>config5</strong></span> will
      first check if there are modifications needed. Changes that require no
      modifications on the target system are not shown in the default
      verbosity level.</p><p>The following subsections describe how each change type is
      applied.</p><div class="section" title="3.3.3.1. copy and truncate"><div class="titlepage"><div><div><h4 class="title"><a name="idp530496"></a>3.3.3.1. <code class="function">copy</code> and
        <code class="function">truncate</code></h4></div></div></div><p>When applying a <code class="function">copy</code> or
        <code class="function">truncate</code> change <span class="command"><strong>config5</strong></span> will
        do it with as few side effects as possible. A file is only replaced or
        created if it is missing or its content (or file type) changes in
        which case <span class="command"><strong>config5</strong></span> does the following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>If the file already exists but is not a plain file then it
            will be deleted first.</p></li><li class="listitem"><p>It will create a temporary file with the new content and set
            all permissions as specified. If SELinux is enabled and no SELinux
            context is specified and the file is replaced then the context
            from the current file is copied to the temporary file.</p></li><li class="listitem"><p>The temporary file is renamed to the real file name which
            also deletes the old file.</p></li></ol></div><p>If <span class="emphasis"><em>in-place</em></span> modification is explicitly
        enabled using the <code class="option">-i</code> flag then the existing file is
        modified directly instead and <span class="command"><strong>config5</strong></span> does the
        following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>If the file already exists but is not a plain file then it
            will be deleted first.</p></li><li class="listitem"><p>It will write the new content to the file.</p></li></ol></div><p>If the file is already present and the content is the same then
        only the properties such as user, group, mode or SELinux context (if
        enabled) are modified if necessary.</p></div><div class="section" title="3.3.3.2. directory"><div class="titlepage"><div><div><h4 class="title"><a name="idp542336"></a>3.3.3.2. <code class="function">directory</code></h4></div></div></div><p>If a file exists with the same path as the directory it is
        removed.</p></div><div class="section" title="3.3.3.3. execute"><div class="titlepage"><div><div><h4 class="title"><a name="idp544016"></a>3.3.3.3. <code class="function">execute</code></h4></div></div></div><p>The command line is executed by the default shell of the user
        who is running <span class="command"><strong>config5</strong></span>.</p></div><div class="section" title="3.3.3.4. link"><div class="titlepage"><div><div><h4 class="title"><a name="idp545776"></a>3.3.3.4. <code class="function">link</code></h4></div></div></div><p>If the link is missing or does not have the same device and
        inode number as the file it links to <span class="command"><strong>config5</strong></span> does
        the following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>It will create a temporary link to the source file</p></li><li class="listitem"><p>The temporary link is renamed to the real file name which
            also deletes the old link.</p></li></ol></div></div><div class="section" title="3.3.3.5. remove"><div class="titlepage"><div><div><h4 class="title"><a name="idp550256"></a>3.3.3.5. <code class="function">remove</code></h4></div></div></div><p>If the file or directory exists it will be removed.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>Recursively deleting directories is not supported at this
          time. Use an <code class="function">execute</code> change to run
          <span class="command"><strong>rm</strong></span> instead.</p></div></div><div class="section" title="3.3.3.6. symlink"><div class="titlepage"><div><div><h4 class="title"><a name="idp553504"></a>3.3.3.6. <code class="function">symlink</code></h4></div></div></div><p>If the symbolic link is missing or does not have the right
        content <span class="command"><strong>config5</strong></span> does the following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>If the file already exists but is not a symbolic link then
            it will be deleted first.</p></li><li class="listitem"><p>It will create a temporary symbolic link with the new
            content and set all permissions as specified. If SELinux is
            enabled and no SELinux context is specified and the symbolic link
            is replaced then the context from the current symbolic link is
            copied to the temporary symbolic link.</p></li><li class="listitem"><p>The temporary symbolic link is renamed to the real file name
            which also deletes the old symbolic link.</p></li></ol></div></div><div class="section" title="3.3.3.7. properties"><div class="titlepage"><div><div><h4 class="title"><a name="idp559264"></a>3.3.3.7. properties</h4></div></div></div><p>The file or directory must exist. The properties such as user,
        group, mode or SELinux context (if enabled) are modified if
        necessary.</p></div></div><div class="section" title="3.3.4. Triggered Changes"><div class="titlepage"><div><div><h3 class="title"><a name="app.triggers"></a>3.3.4. Triggered Changes</h3></div></div></div><p>A simple mechanism exists to make the application of changes
      depend on the modifications of previous changes. The most common case
      where this is used is to restart a service after updating its
      configuration files.</p><p>Each class and each feature has a <span class="emphasis"><em>triggered</em></span>
      flag which are cleared before configuration application. Every change
      that requires a relevant modification (see <a class="xref" href="#app.triggers.relevant" title="3.3.4.1. Relevant Modifications">Section 3.3.4.1, &#8220;Relevant Modifications&#8221;</a>) to the target system will set the
      triggered flags of its class and feature. Each change can be flagged to
      be triggered using either the <code class="option">-t</code> or <code class="option">-T</code>
      flag. In this case the change is only applied if the triggered flag of
      the class (<code class="option">-t</code>) or the feature (<code class="option">-T</code>) of
      the change is set.</p><p>The following facts are also relevant when working with triggered
      changes:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The flags are kept across all phases and passes</p></li><li class="listitem"><p>Triggered changes never set the triggered flags</p></li></ul></div><div class="section" title="3.3.4.1. Relevant Modifications"><div class="titlepage"><div><div><h4 class="title"><a name="app.triggers.relevant"></a>3.3.4.1. Relevant Modifications</h4></div></div></div><p>Not every modification that is done when a change is applied
        sets the triggered flags. The following table lists the modifications
        that set or do not set the triggered flags:</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col><col></colgroup><thead><tr><th align="left">Change</th><th>Triggered Flag Set</th><th align="left">No Change</th></tr></thead><tbody><tr><td align="left"><code class="function">append</code></td><td>Never</td><td> </td></tr><tr><td align="left"><code class="function">copy</code></td><td>File missing or not a plain file,content
                changed</td><td>Change of user, group, mode or other properties</td></tr><tr><td align="left"><code class="function">directory</code></td><td>Directory missing or not a directory</td><td>Change of user, group, mode or other properties</td></tr><tr><td align="left"><code class="function">execute</code></td><td>Never</td><td> </td></tr><tr><td align="left"><code class="function">link</code></td><td>Link missing or to different inode</td><td> </td></tr><tr><td align="left"><code class="function">properties</code></td><td>Change of user, group, mode or other properties</td><td> </td></tr><tr><td align="left"><code class="function">remove</code></td><td>File or directory existing</td><td> </td></tr><tr><td align="left"><code class="function">symlink</code></td><td>Symbolic link missing or not a symbolic link, content
                changed</td><td>Change of user, group or other properties</td></tr><tr><td align="left"><code class="function">truncate</code></td><td>File missing or not a plain file,content
                changed</td><td>Change of user, group, mode or other properties</td></tr></tbody></table></div></div></div></div></div><div lang="en_US" class="chapter" title="Chapter 4. The config5 Script"><div class="titlepage"><div><div><h2 class="title"><a name="run"></a>Chapter 4. The <span class="command"><strong>config5 Script</strong></span></h2></div></div></div><p>This chapter describes the <span class="command"><strong>config5</strong></span> script and how
  to use it for configuration verification, application and various management
  tasks.</p><div class="section" title="4.1. Requirements"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp595488"></a>4.1. Requirements</h2></div></div></div><p>The <span class="command"><strong>config5</strong></span> script is written in
    <span class="productname">Perl</span> and therefore requires a
    <span class="productname">Perl</span> installation with the core modules as well
    as a number of additional modules.</p><div class="section" title="4.1.1. Perl Modules"><div class="titlepage"><div><div><h3 class="title"><a name="idp597696"></a>4.1.1. Perl Modules</h3></div></div></div><p>The following non-core <span class="productname">Perl</span> modules are
      required to run <span class="command"><strong>config5</strong></span>:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="systemitem">Module::Load</code></p></li><li class="listitem"><p><code class="systemitem">Module::Load::Conditional</code></p></li><li class="listitem"><p><code class="systemitem">Template</code></p></li></ul></div><p>The following modules are only required if a given feature is
      enabled:</p><div class="variablelist"><dl><dt><span class="term"><code class="systemitem">File::ExtAttr</code></span></dt><dd><p>Required for SELinux support (see <a class="xref" href="#cust.os" title="7.3.2. Operating System Settings">Section 7.3.2, &#8220;Operating System Settings&#8221;</a>).</p></dd><dt><span class="term"><code class="systemitem">Socket6</code></span></dt><dd><p>Required for IPv6 support if the IP6 address is a mandatory
            system information item (see <a class="xref" href="#cust.sysinfo" title="7.3.3. System Information Settings">Section 7.3.3, &#8220;System Information Settings&#8221;</a>).</p></dd></dl></div></div><div class="section" title="4.1.2. Other Requirements"><div class="titlepage"><div><div><h3 class="title"><a name="idp611472"></a>4.1.2. Other Requirements</h3></div></div></div><p>These external programs are required if a given feature or
      component of <span class="command"><strong>config5</strong></span> is used:</p><div class="variablelist"><dl><dt><span class="term"><span class="command"><strong>lsb_release</strong></span></span></dt><dd><p>Required for the LSB system information module.</p></dd></dl></div></div></div><div class="section" title="4.2. Running config5"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp616000"></a>4.2. Running <span class="command"><strong>config5</strong></span></h2></div></div></div><p>The <span class="command"><strong>config5</strong></span> script will determine its location
    and automatically find settings, libraries and the feature set relative to
    its path.</p><p>The libraries and settings are expected to be found in the
    directories <code class="filename">../lib</code> and <code class="filename">../etc</code> respectively. The feature set is
    expected in <code class="filename">../features</code> unless the
    path of the feature set is explicitly set using the
    <code class="option">--features</code> command line option.</p><div class="section" title="4.2.1. Arguments"><div class="titlepage"><div><div><h3 class="title"><a name="idp621328"></a>4.2.1. Arguments</h3></div></div></div><p>The arguments to <span class="command"><strong>config5</strong></span> are a list of
      features. Only the features listed on the command line are processed in
      alphabetical order.</p><p>If no features are specified then all features of the feature set
      are processed.</p></div></div><div class="section" title="4.3. Applying the Configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp623744"></a>4.3. Applying the Configuration</h2></div></div></div><p>The configuration is applied by running the config5 script with the
    <code class="option">--apply</code> command line option.</p><pre class="screen"># /usr/config5/bin/config5 --apply</pre><p>This is also the default action (the other two are
    <code class="option">--check</code> and <code class="option">--report</code>) so the option can
    be omitted:</p><pre class="screen"># /usr/config5/bin/config5</pre><p>While the configuration is applied config5 will use a lock file to
    make sure that no other instance of config5 is running at the same time.
    The file is relative to the root directory system item (see <a class="xref" href="#sysinfo.items.root" title="6.2.3. Root">Section 6.2.3, &#8220;Root&#8221;</a>), the default path for the file is
    <code class="filename">/var/lock/config5</code> but can be changed (see <a class="xref" href="#cust.general" title="7.3.1. General Settings">Section 7.3.1, &#8220;General Settings&#8221;</a>).</p><div class="section" title="4.3.1. Changing System Information Items"><div class="titlepage"><div><div><h3 class="title"><a name="idp630176"></a>4.3.1. Changing System Information Items</h3></div></div></div><p>The <code class="option">--set</code> command line options can be used to
      override the system information items that are automatically determined.
      The argument to <code class="option">--set</code> is of the form
      <code class="option">key=value</code> where <code class="option">key</code> is the identifier
      of the system information item and <code class="option">value</code> is the value
      to set:</p><pre class="screen"># /usr/config5/bin/config5 --set host=foobar</pre><p>The list of identifiers of all configured system information items
      can be displayed using <code class="option">--report systemitems</code>.</p></div><div class="section" title="4.3.2. SELinux Support"><div class="titlepage"><div><div><h3 class="title"><a name="idp635568"></a>4.3.2. SELinux Support</h3></div></div></div><p>SELinux support is a built-in feature and typically configured via
      the global configuration (see <a class="xref" href="#cust.os" title="7.3.2. Operating System Settings">Section 7.3.2, &#8220;Operating System Settings&#8221;</a>). In some
      situations, such as when running <span class="command"><strong>config5</strong></span> on diskless
      clients, it may be required to override this setting via command line.
      SELinux support is also automatically disabled when the root directory
      is not <code class="filename">/</code> but the command line options take
      precedence.</p><p>The <code class="option">--selinux</code> command line option enables SELinux
      support, the <code class="option">--no-selinux</code> command line option disables
      it:</p><pre class="screen"># /usr/config5/bin/config5 --no-selinux</pre></div><div class="section" title="4.3.3. Dry Run"><div class="titlepage"><div><div><h3 class="title"><a name="idp640896"></a>4.3.3. Dry Run</h3></div></div></div><p>The <code class="option">--dummy</code> command line options will force
      <span class="command"><strong>config5</strong></span> to simulate configuration application:</p><pre class="screen"># /usr/config5/bin/config5 --apply --dummy</pre><p>No changes to the system will be done. The changes that would be
      done are printed.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>The dry run uses the current system state for the simulation
        which may not be enough to reflect the changes that would really be
        done.</p><p>For instance a <code class="function">service start</code> change that
        follows a <code class="function">service stop</code> change for a service would
        usually be executed but in dry run mode the current state is not the
        same as after the <code class="function">service stop</code> change was
        executed.</p></div></div><div class="section" title="4.3.4. Disable Configuration Application"><div class="titlepage"><div><div><h3 class="title"><a name="run.disable"></a>4.3.4. Disable Configuration Application</h3></div></div></div><p>The configuration application for a single system can be disabled
      by creating an empty <span class="emphasis"><em>disable file</em></span>. This is usually
      helpful when manual maintenance is done on a system and running
      <span class="command"><strong>config5</strong></span> would interfere. The file is relative to the
      root directory system item (see <a class="xref" href="#sysinfo.items.root" title="6.2.3. Root">Section 6.2.3, &#8220;Root&#8221;</a>).</p><p>The default path for the file is
      <code class="filename">/etc/config5-disabled</code> but can be changed (see <a class="xref" href="#cust.general" title="7.3.1. General Settings">Section 7.3.1, &#8220;General Settings&#8221;</a>).</p></div></div><div class="section" title="4.4. Verifying the Configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="run.verify"></a>4.4. Verifying the Configuration</h2></div></div></div><p>With the <code class="option">--check</code> command line option the
    configuration will only be checked for correctness. Currently the
    following static checks are performed:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Syntax errors in the <code class="filename">spec</code> files or missing
        spec files.</p></li><li class="listitem"><p>Missing source files for copy or append.</p></li><li class="listitem"><p>File or directory modified in more than one feature.</p></li><li class="listitem"><p>Missing referenced class.</p></li><li class="listitem"><p>Missing <code class="function">copy</code> or
        <code class="function">truncate</code> change for <code class="function">append</code>
        changes.</p></li><li class="listitem"><p>Duplicate classes in a feature.</p></li></ul></div><p>Ensuring that every append change has a corresponding copy or
    truncate change cannot be verified statically. To enable this check do the
    following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Collect the output of <span class="command"><strong>config5 --report
        rawsystem</strong></span> from all systems the configuration will be applied
        to and store each output in an individual file in some directory,
        typically a network share. The directory must be readable from where
        you will run config5 --check (if you integrate config5 with
        <span class="productname">Subversion</span> such as described in <a class="xref" href="#deploy" title="Chapter 5. Deployment">Chapter 5, <i>Deployment</i></a> then the directory must also be accessible on your
        <span class="productname">Subversion </span>server). The best is to do this
        periodically.</p></li><li class="listitem"><p>Set the setting
        <code class="varname">$self-&gt;{system}-&gt;{variations_directory}</code> (see
        <a class="xref" href="#cust.sysinfo" title="7.3.3. System Information Settings">Section 7.3.3, &#8220;System Information Settings&#8221;</a>) to the directory containing the above
        files.</p></li></ol></div></div><div class="section" title="4.5. Reports"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="run.reports"></a>4.5. Reports</h2></div></div></div><p>The <code class="option">--report</code> command line option can be used to
    produce a variety of reports. The argument to <code class="option">--report</code> is
    a report type:</p><div class="variablelist"><dl><dt><span class="term"><code class="systemitem">changes</code></span></dt><dd><p>Report the keywords of all changes.</p></dd><dt><span class="term"><code class="systemitem">classes</code></span></dt><dd><p>Report all classes of all features.</p></dd><dt><span class="term"><code class="systemitem">classorder</code></span></dt><dd><p>Report all classes that can be matched in a
          <code class="filename">spec</code> file, in the order they are matched (see
          <a class="xref" href="#cust.class.match" title="2.3.2. Best Match">Section 2.3.2, &#8220;Best Match&#8221;</a>).</p></dd><dt><span class="term"><code class="systemitem">features</code></span></dt><dd><p>Produce a normalized output of all changes, classes and
          features.</p></dd><dt><span class="term"><code class="systemitem">files</code></span></dt><dd><p>Report all files that are copied or truncated in all classes
          of all features. This information can be used to manage
          configuration file upgrades when a new release of an operating
          system is available.</p></dd><dt><span class="term"><code class="systemitem">matches</code></span></dt><dd><p>Report the matching class for each feature based on the
          available system information.</p></dd><dt><span class="term"><code class="systemitem">rawsystem</code></span></dt><dd><p>Report the current values for all system information items for
          the system in a form that can be parsed by a shell or used for
          configuration verification.</p></dd><dt><span class="term"><code class="systemitem">stages</code></span></dt><dd><p>Report all configured stages.</p></dd><dt><span class="term"><code class="systemitem">system</code></span></dt><dd><p>Report the current values for all system information items for
          the system. This is also printed first when applying the
          configuration.</p></dd><dt><span class="term"><code class="systemitem">systemitems</code></span></dt><dd><p>Report all configured system information items.</p></dd></dl></div></div></div><div lang="en_US" class="chapter" title="Chapter 5. Deployment"><div class="titlepage"><div><div><h2 class="title"><a name="deploy"></a>Chapter 5. Deployment</h2></div></div></div><p>This chapter provides information and tips how to actually deploy
  <span class="productname">Config5</span> in your organization.</p><p>Deploying <span class="productname">Config5</span> to a system is done in
  two steps:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Distributing the <span class="productname">Config5</span> deployment kit
      including the configuration data on the system</p></li><li class="listitem"><p>Running the <span class="command"><strong>config5</strong></span> script</p></li></ol></div><p><span class="productname">Config5</span> is very flexible and allows for a
  wide range of approaches for both.</p><div class="section" title="5.1. Distribution of the Configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp701840"></a>5.1. Distribution of the Configuration</h2></div></div></div><p>The <span class="command"><strong>config5</strong></span> script along with its settings and
    libraries are typically distributed along with the feature set. This set
    comprises the deployment kit (the <code class="filename">deploy</code> folder in the distribution). Some
    options for distributing the deployment kit include:</p><div class="variablelist"><dl><dt><span class="term">Network File system</span></dt><dd><p>The files of the deployment kit are exported via CIFS or NFS
          and mounted read-only on the system to configure. If applicable the
          authentication scheme of the network file system can be used to
          restrict access.</p></dd><dt><span class="term">Version Control System</span></dt><dd><p>A version control system such as Subversion or GIT can be used
          as a distribution point. A system will check out the latest version
          of the deployment kit.</p></dd><dt><span class="term">Remote Copy</span></dt><dd><p>The deployment kit is pushed on a system via
          <span class="command"><strong>rsync</strong></span>, <span class="command"><strong>scp</strong></span> or any other tool
          that does the job.</p></dd></dl></div><p>The right choice of the deployment method largely depends on your
    work flow, policies and security requirements.</p><div class="section" title="5.1.1. Integration with Subversion"><div class="titlepage"><div><div><h3 class="title"><a name="idp712768"></a>5.1.1. Integration with Subversion</h3></div></div></div><p><span class="productname">Config5</span> integrates well with
      <span class="productname">Subversion</span>. The configuration check function
      of <span class="command"><strong>config5</strong></span> (see <a class="xref" href="#run.verify" title="4.4. Verifying the Configuration">Section 4.4, &#8220;Verifying the Configuration&#8221;</a>) can
      easily be used in a pre-commit hook to guard against common errors such
      as syntax errors and missing configuration files:</p><pre class="programlisting">#!/bin/sh

REPOSITORY="$1"
TRANSACTION="$2"

TEMPDIR=`/bin/mktemp -d`
export-commit "$REPOSITORY" "$TRANSACTION" trunk "$TEMPDIR" 1&gt;&amp;2

"$TEMPDIR/trunk/bin/config5" --check 1&gt;&amp;2

RC=$?
rm -rf "$TEMPDIR"
exit $RC
</pre><p>This script relies on an additional script
      <span class="command"><strong>export-commit</strong></span> which performs an export of the
      repository <span class="emphasis"><em>including the pending commit</em></span>:</p><pre class="programlisting">#!/bin/sh

REPOSITORY="$1"
TRANSACTION="$2"
SUBDIR="$3"
DIRECTORY="$4"

svnlook tree --full-paths "$REPOSITORY" -t "$TRANSACTION" "$SUBDIR" | while read path
do
   if [[ $path =~ "\/$" ]]
   then
      mkdir -p "$DIRECTORY/$path"
   else
      svnlook cat "$REPOSITORY" -t "$TRANSACTION" "$path" &gt; "$DIRECTORY/$path";
      chmod 755 "$DIRECTORY/$path"
   fi
done
</pre><p>Both scripts can be found in the directory <code class="filename">examples/svn</code> in the distribution.</p></div></div><div class="section" title="5.2. Running config5"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp719792"></a>5.2. Running <span class="command"><strong>config5</strong></span></h2></div></div></div><p>Running the <span class="command"><strong>config5</strong></span> script at the right time is
    an important decision for a successful deployment and depends on several
    factors such as the operating system, work flows, policies, etc. Below is
    a non-conclusive list of possible places from where to run
    <span class="command"><strong>config5</strong></span>:</p><div class="variablelist"><dl><dt><span class="term">cron</span></dt><dd><p>Running <span class="command"><strong>config5</strong></span> periodically via
          <span class="command"><strong>cron</strong></span> is the simplest way to make sure that all
          running systems receive a new configuration.</p></dd><dt><span class="term">anacron</span></dt><dd><p>Configuring <span class="command"><strong>anacron</strong></span> on systems such as
          laptops and desktops that may be put in sleep mode or hibernation
          can be a meaningful complement to <span class="command"><strong>cron</strong></span>. If cron
          runs config5 often (like, every hour) this may not be
          necessary.</p></dd><dt><span class="term">on boot</span></dt><dd><p>After the operating system has booted it is usually best to
          run <span class="command"><strong>config5</strong></span> once to get the latest configuration
          updates immediately, possibly before the services it configures
          start up.</p></dd><dt><span class="term">after package updates</span></dt><dd><p>After packages are updated it may be required to overwrite
          configuration files by running <span class="command"><strong>config5</strong></span>
          immediately afterward.</p></dd></dl></div><p>When <span class="command"><strong>config5</strong></span> is running it uses a lock file to
    make sure that only one instance of <span class="command"><strong>config5</strong></span> is running
    at a time. It is therefore save to run <span class="command"><strong>config5</strong></span> from
    different places without additional synchronization means.</p><div class="section" title="5.2.1. Random Delay"><div class="titlepage"><div><div><h3 class="title"><a name="idp735424"></a>5.2.1. Random Delay</h3></div></div></div><p>If many system are likely to update their configuration at the
      same time, it may be meaningful to add a random delay before running
      <span class="command"><strong>config5</strong></span>. This is usually the case if
      <span class="command"><strong>config5</strong></span> is run via <span class="command"><strong>cron</strong></span> on managed
      systems. If the deployment kit is on a network file system then all
      managed systems will otherwise access the file server at the same time.
      Depending on the file server and file system this may cause all kinds of
      errors.</p><p>The following <span class="command"><strong>bash</strong></span> code will perform a random
      five minute delay before running <span class="command"><strong>config5</strong></span>:</p><div class="example"><a name="idp739840"></a><p class="title"><b>Example 5.1. Random Delay with bash</b></p><div class="example-contents"><pre class="programlisting">RND=$RANDOM ; let "RND\%=300" ; sleep $RND; /usr/config5/bin/config5</pre></div></div><br class="example-break"><p>If the deployment kit is pulled from a central repository via
      download or checkout the delay should be placed before the download or
      checkout commands for similar reasons.</p></div></div></div><div lang="en_US" class="chapter" title="Chapter 6. System Information"><div class="titlepage"><div><div><h2 class="title"><a name="sysinfo"></a>Chapter 6. System Information</h2></div></div></div><p><span class="productname">Config5</span> uses an approach where the
  configuration is selected on the system that is being configured. This
  chapter explains the mechanism by which <span class="command"><strong>config5</strong></span> discovers
  information about the system it runs on.</p><div class="section" title="6.1. The System Information Module"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp744656"></a>6.1. The System Information Module</h2></div></div></div><p>The module used for gathering the system information is
    exchangeable. <span class="productname">Config5</span> ships with two modules
    for immediate productive use: <code class="systemitem">LSB</code>
    (the default) and <code class="systemitem">Hardwired</code>.</p><p>Custom modules can also be added. A sample module (the one that we
    at <span class="emphasis"><em>isginf</em></span> use in our productive environment) can be
    found in <code class="filename">examples/modules/System/SystemInfo.pm</code> in the
    distribution.</p></div><div class="section" title="6.2. System Information Items"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sysinfo.items"></a>6.2. System Information Items</h2></div></div></div><p>The system information is organized in <span class="emphasis"><em>items</em></span>.
    Each item is determined somehow by the system information module and can
    be used in the class matching process and is available as a variable for
    substitution.</p><p>Each item has a unique name and the following relevant information
    associated with it:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Priority for displaying the system information summary (low
        priority means display first).</p></li><li class="listitem"><p>Whether or not the item is optional (<code class="constant">0</code>) or
        mandatory (<code class="constant">1</code>).</p></li><li class="listitem"><p>The type of the system information item (<code class="constant">0</code>
        for scalar, <code class="constant">1</code> for ordered list).</p></li><li class="listitem"><p>A conversion method for the gathered value of the item (see
        below).</p></li><li class="listitem"><p>The human readable description displayed in the system
        information summary.</p></li></ul></div><p>The conversion is useful to modify the raw value gathered by the
    module. No conversions are used in the default configuration. The
    following conversions are supported:</p><div class="variablelist"><dl><dt><span class="term">none</span></dt><dd><p>No conversion.</p></dd><dt><span class="term">toupper</span></dt><dd><p>Convert all characters to upper case.</p></dd><dt><span class="term">tolower</span></dt><dd><p>Convert all characters to lower case.</p></dd><dt><span class="term">nows</span></dt><dd><p>Strip all white space characters.</p></dd><dt><span class="term">wstounderscore</span></dt><dd><p>Convert all white space characters to underscore.</p></dd></dl></div><p>The available system information items are configured via settings
    (see <a class="xref" href="#cust.sysinfo" title="7.3.3. System Information Settings">Section 7.3.3, &#8220;System Information Settings&#8221;</a>). The following items are configured
    by default:</p><div class="informaltable"><table border="1"><colgroup><col><col><col><col><col><col></colgroup><thead><tr><th align="left">Item</th><th align="left">Priority</th><th align="left">Mandatory</th><th align="left">Type</th><th align="left">Conversion</th><th align="left">Description</th></tr></thead><tbody><tr><td><code class="varname">date</code></td><td><code class="constant">10</code></td><td>no</td><td>scalar</td><td align="left">none</td><td>Architecture</td></tr><tr><td><code class="varname">host</code></td><td><code class="constant">20</code></td><td>yes</td><td>scalar</td><td align="left">none</td><td>Host name</td></tr><tr><td><code class="varname">arch</code></td><td><code class="constant">30</code></td><td>yes</td><td>scalar</td><td align="left">none</td><td>Architecture</td></tr><tr><td><code class="varname">os</code></td><td><code class="constant">40</code></td><td>yes</td><td>scalar</td><td>none</td><td>OS</td></tr><tr><td><code class="varname">release</code></td><td><code class="constant">50</code></td><td>yes</td><td>scalar</td><td align="left">none</td><td>Release</td></tr><tr><td><code class="varname">ip</code></td><td><code class="constant">60</code></td><td>no</td><td>scalar</td><td align="left">none</td><td>IP</td></tr><tr><td><code class="varname">ip6</code></td><td><code class="constant">70</code></td><td>no</td><td>scalar</td><td align="left">none</td><td>IP6</td></tr><tr><td><code class="varname">fqhn</code></td><td><code class="constant">80</code></td><td>no</td><td>scalar</td><td align="left">none</td><td>Fully qualified host name</td></tr><tr><td><code class="varname">fqdn</code></td><td><code class="constant">90</code></td><td>no</td><td>scalar</td><td align="left">none</td><td>Fully qualified domain name</td></tr><tr><td><code class="varname">properties</code></td><td><code class="constant">100</code></td><td>no</td><td>list</td><td align="left">none</td><td>Properties</td></tr><tr><td><code class="varname">root</code></td><td><code class="constant">110</code></td><td>yes</td><td>scalar</td><td align="left">none</td><td>Root directory</td></tr><tr><td><code class="varname">stage</code></td><td><code class="constant">120</code></td><td>yes</td><td>scalar</td><td align="left">none</td><td>Stage</td></tr></tbody></table></div><div class="section" title="6.2.1. Common System Information Items"><div class="titlepage"><div><div><h3 class="title"><a name="idp777872"></a>6.2.1. Common System Information Items</h3></div></div></div><p>The following system information items are determined independent
      of the chosen module and are always available and are determined from
      the running operating system:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="varname">arch</code></p></li><li class="listitem"><p><code class="varname">host</code></p></li><li class="listitem"><p><code class="varname">ip</code> (if configured)</p></li><li class="listitem"><p><code class="varname">ip6</code> (if configured)</p></li><li class="listitem"><p><code class="varname">properties</code></p></li><li class="listitem"><p><code class="varname">root</code></p></li><li class="listitem"><p><code class="varname">stage</code></p></li></ul></div><p>If the root directory is changed (see <a class="xref" href="#app.root" title="3.2.1. Root Directory">Section 3.2.1, &#8220;Root Directory&#8221;</a>)
      then only the following items are determined.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="varname">properties</code></p></li><li class="listitem"><p><code class="varname">root</code></p></li><li class="listitem"><p><code class="varname">stage</code></p></li></ul></div><p>The remaining mandatory modules must be provided by command line
      argument or by an alternative system information module such as the
      <code class="systemitem">Hardwired</code> module (see <a class="xref" href="#sysinfo.mod.hardwired" title="6.3.2. Hardwired">Section 6.3.2, &#8220;Hardwired&#8221;</a>).</p></div><div class="section" title="6.2.2. Properties"><div class="titlepage"><div><div><h3 class="title"><a name="idp838400"></a>6.2.2. Properties</h3></div></div></div><p>The properties are read from a file that contains space- or
      comma-separated words. This file can be provisioned during
      installation.</p></div><div class="section" title="6.2.3. Root"><div class="titlepage"><div><div><h3 class="title"><a name="sysinfo.items.root"></a>6.2.3. Root</h3></div></div></div><p>The root directory (see <a class="xref" href="#app.root" title="3.2.1. Root Directory">Section 3.2.1, &#8220;Root Directory&#8221;</a>) can be
      modified with the <code class="option">--set</code> command line option when
      running <span class="command"><strong>config5</strong></span>. Changing the root directory only
      makes sense when the configuration is applied to something other than
      the system where <span class="command"><strong>config5</strong></span> is run, for instance a
      diskless client image on the file server that serves it.</p><p>The default path of the root directory is taken from the
      <code class="varname">$self-&gt;{os}-&gt;{root}</code> setting (see <a class="xref" href="#cust.os" title="7.3.2. Operating System Settings">Section 7.3.2, &#8220;Operating System Settings&#8221;</a>) and is typically <code class="filename">/</code>.</p></div><div class="section" title="6.2.4. Stage"><div class="titlepage"><div><div><h3 class="title"><a name="idp845488"></a>6.2.4. Stage</h3></div></div></div><p>The stage (see <a class="xref" href="#app.root" title="3.2.1. Root Directory">Section 3.2.1, &#8220;Root Directory&#8221;</a>) can be modified with
      the <code class="option">--set</code> command line option when running
      <span class="command"><strong>config5</strong></span>.</p><p>The default change can be changed with the following
      setting:</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="left">Setting</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td><code class="varname">$self-&gt;{system}-&gt;{defaults}-&gt;{stage}</code></td><td><code class="filename">production</code></td><td>The default stage.</td></tr></tbody></table></div></div></div><div class="section" title="6.3. System Information Modules"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp750496"></a>6.3. System Information Modules</h2></div></div></div><p>The system information module to use can be changed in the settings
    (see <a class="xref" href="#cust.sysinfo" title="7.3.3. System Information Settings">Section 7.3.3, &#8220;System Information Settings&#8221;</a>).</p><div class="section" title="6.3.1. LSB"><div class="titlepage"><div><div><h3 class="title"><a name="idp857264"></a>6.3.1. LSB</h3></div></div></div><p>The <code class="systemitem">LSB</code> module can
      determine the OS name and release using
      <span class="command"><strong>lsb_release</strong></span>.</p><p>The following settings can be used to control the information
      gathering:</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="left">Setting</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td><code class="varname">$self-&gt;{system}-&gt;{lsb}-&gt;{append_code}</code></td><td><code class="constant">0</code></td><td>Append the OS code name to the OS id with an underscore
              in between.</td></tr></tbody></table></div></div><div class="section" title="6.3.2. Hardwired"><div class="titlepage"><div><div><h3 class="title"><a name="sysinfo.mod.hardwired"></a>6.3.2. Hardwired</h3></div></div></div><p>The <code class="systemitem">Hardwired</code> module can
      read constants for the active system information items from the
      <span class="productname">Config5</span> settings. Supplied constants overload
      the automatically determined information (architecture, host name,
      etc.):</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="left">Setting</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td><code class="varname">$self-&gt;{system}-&gt;{hardwired}-&gt;{<em class="replaceable"><code>item</code></em>}</code></td><td><code class="constant"><em class="replaceable"><code>undefined</code></em></code></td><td>Set the constant value for system information item
              <em class="replaceable"><code>'item</code></em>'.</td></tr></tbody></table></div></div></div></div><div lang="en_US" class="chapter" title="Chapter 7. Customization"><div class="titlepage"><div><div><h2 class="title"><a name="idp878448"></a>Chapter 7. Customization</h2></div></div></div><p><span class="productname">Config5</span> ships with a reasonable set of
  default settings for the <span class="command"><strong>config5</strong></span> script for a normal
  deployment using the core features.</p><p>Systems administrators with special needs or policies can tweak many
  settings that affect the file system structure or behavior of
  <span class="productname">Config5</span>.</p><div class="section" title="7.1. Files"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp881872"></a>7.1. Files</h2></div></div></div><p>All files are located under the directory <code class="filename">etc</code> next to the <code class="filename">bin</code>
    directory containing the <span class="command"><strong>config5</strong></span> script. In the
    official distribution the files are in <code class="filename">deploy/etc</code>:</p><pre class="screen">$ ls deploy/etc
custom.d  extensions.d  settings.pl</pre><p>All configuration files are basically perl code that modifies the
    settings data structure which is passed in <code class="varname">$_</code> by
    reference.</p><div class="section" title="7.1.1. Order of Processing"><div class="titlepage"><div><div><h3 class="title"><a name="idp887296"></a>7.1.1. Order of Processing</h3></div></div></div><p>The various files are processed in the following order:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>The main settings file
          <code class="filename">settings.pl</code>.</p></li><li class="listitem"><p>All files ending in <code class="filename">.pl</code>
          in <code class="filename">extensions.d</code> in
          alphabetical order.</p></li><li class="listitem"><p>All files ending in <code class="filename">.pl</code>
          in <code class="filename">custom.d</code> in alphabetical
          order.</p></li></ol></div><p>Settings in one file can be removed, replaced or extended by files
      that are loaded afterward.</p></div></div><div class="section" title="7.2. Custom Settings"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp895872"></a>7.2. Custom Settings</h2></div></div></div><p>Custom settings should be placed in a file ending in
    <code class="filename">.pl</code> in the directory <code class="filename">etc/custom.d</code>. A custom settings file should
    start with the following code:</p><pre class="programlisting">my $self = $_;</pre><p>This is not absolutely necessary but the other settings file all use
    <code class="varname">$self</code> and settings can be customized easier using
    copy-paste.</p><p>Each file should also end with the following line:</p><pre class="programlisting">1;</pre><p>The file <code class="filename">examples/settings/custom.pl.example</code> in
    the distribution of <span class="productname">Config5</span> can be used as
    template for a custom configuration file.</p></div><div class="section" title="7.3. Settings Reference"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="cust.settings"></a>7.3. Settings Reference</h2></div></div></div><p>The following reference lists the various settings. All examples
    assume that <code class="code">$self</code> is defined and holds the reference to the
    settings structure.</p><div class="section" title="7.3.1. General Settings"><div class="titlepage"><div><div><h3 class="title"><a name="cust.general"></a>7.3.1. General Settings</h3></div></div></div><p>The following settings are of general nature:</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="left">Setting</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td class="nowrap"><code class="varname">$self-&gt;{disable}-&gt;{file}</code></td><td><code class="filename">/etc/config5-disabled</code></td><td>The path of the disable file. If this file is present
              then <span class="command"><strong>config5</strong></span> will not run. Dry runs via dummy
              mode are still possible.</td></tr><tr><td><code class="varname">$self-&gt;{lock}-&gt;{file}</code></td><td><code class="filename">/var/lock/config5</code></td><td>The path of the lock file used to prevent concurrent
              execution of <span class="command"><strong>config5</strong></span>. <span class="emphasis"><em>This file
              must be on the local file system and not on a network
              share</em></span>.</td></tr><tr><td><code class="varname">$self-&gt;{lock}-&gt;{timeout}</code></td><td><code class="constant">5</code></td><td>The timeout after which <span class="command"><strong>config5</strong></span> will
              abort if the lock file cannot be locked. A value of
              <code class="constant">0</code> will block indefinitely until the lock
              file can be locked.</td></tr><tr><td><code class="varname">$self-&gt;{features}-&gt;{name}</code></td><td><code class="filename">features</code></td><td>The directory name of the feature set.</td></tr><tr><td><code class="varname">$self-&gt;{spec}-&gt;{name}</code></td><td><code class="filename">spec</code></td><td>The name of the specification file in each feature
              directory.</td></tr></tbody></table></div></div><div class="section" title="7.3.2. Operating System Settings"><div class="titlepage"><div><div><h3 class="title"><a name="cust.os"></a>7.3.2. Operating System Settings</h3></div></div></div><p>The following settings control additional support for features of
      the operating system:</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="left">Setting</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td><code class="varname">$self-&gt;{os}-&gt;{env}-&gt;{<em class="replaceable"><code>variable</code></em>}</code></td><td>undefine <code class="constant">LANG</code></td><td>Set environment variable to a given string. To undefine
              an environment variable set it to
              <code class="constant">undef</code>.</td></tr><tr><td><code class="varname">$self-&gt;{os}-&gt;{root}</code></td><td><code class="filename">/</code></td><td>The root directory.</td></tr><tr><td><code class="varname">$self-&gt;{os}-&gt;{selinux}-&gt;{enable}</code></td><td><code class="constant">0</code></td><td>Enables support for SELinux if set to
              <code class="constant">1</code> and disables it if set to
              <code class="constant">0</code>.</td></tr><tr><td><code class="varname">$self-&gt;{os}-&gt;{syslog}-&gt;{enable}</code></td><td><code class="constant">1</code></td><td>Enables logging via <code class="systemitem">syslog</code> if set to 1 and disables it
              if set to <code class="constant">0</code>.</td></tr><tr><td><code class="varname">$self-&gt;{os}-&gt;{syslog}-&gt;{identifier}</code></td><td><code class="systemitem">config5</code></td><td>The identifier for log entries if logging via <code class="systemitem">syslog</code> is enabled.</td></tr><tr><td><code class="varname">$self-&gt;{os}-&gt;{syslog}-&gt;{facility}</code></td><td><code class="systemitem">local5</code></td><td>The facility for log entries if logging via <code class="systemitem">syslog</code> is enabled.</td></tr><tr><td><code class="varname">$self-&gt;{os}-&gt;{umask}</code></td><td><code class="constant">022</code></td><td>The file and directory creating mask for shell
              commands.</td></tr></tbody></table></div></div><div class="section" title="7.3.3. System Information Settings"><div class="titlepage"><div><div><h3 class="title"><a name="cust.sysinfo"></a>7.3.3. System Information Settings</h3></div></div></div><p>The following settings control the system information
      collection.</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="left">Setting</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td><code class="varname">$self-&gt;{system}-&gt;{class}</code></td><td><code class="classname">Config5::System::LSB</code></td><td>The class that collects the system information.</td></tr><tr><td><code class="varname">$self-&gt;{system}-&gt;{items}-&gt;{<em class="replaceable"><code>item</code></em>}</code></td><td><code class="filename">see <a class="xref" href="#sysinfo.items" title="6.2. System Information Items">Section 6.2, &#8220;System Information Items&#8221;</a></code></td><td>The known system information items.</td></tr><tr><td><code class="varname">$self-&gt;{system}-&gt;{properties}-&gt;{file}</code></td><td><code class="filename">/etc/config5-properties</code></td><td>The file name of the properties file.</td></tr><tr><td><code class="varname">$self-&gt;{system}-&gt;{variations_directory}</code></td><td><em class="replaceable"><code>undefined</code></em></td><td>Directory containing files variations of system
              information (see <a class="xref" href="#run.verify" title="4.4. Verifying the Configuration">Section 4.4, &#8220;Verifying the Configuration&#8221;</a>).</td></tr></tbody></table></div></div><div class="section" title="7.3.4. Built-in Changes"><div class="titlepage"><div><div><h3 class="title"><a name="cust.changes"></a>7.3.4. Built-in Changes</h3></div></div></div><p>The following settings control the behavior of the built-in
      changes.</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="left">Setting</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td><code class="varname">$self-&gt;{builtin}-&gt;{execute}-&gt;{allow_chroot}</code></td><td><code class="classname">0</code></td><td>Apply execute changes if root is not
              <code class="filename">/</code>.</td></tr></tbody></table></div></div><div class="section" title="7.3.5. Verbosity"><div class="titlepage"><div><div><h3 class="title"><a name="cust.output"></a>7.3.5. Verbosity</h3></div></div></div><p>The amount of information that is printed at which verbosity level
      can be configured by changing the following settings.</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="left">Setting</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td><code class="varname">$self-&gt;{display}-&gt;{entities}-&gt;{system}</code></td><td><code class="constant">1</code></td><td>Print the system information.</td></tr><tr><td><code class="varname">$self-&gt;{display}-&gt;{entities}-&gt;{pass}</code></td><td><code class="constant">1</code></td><td>Print the pass numbers.</td></tr><tr><td><code class="varname">$self-&gt;{display}-&gt;{entities}-&gt;{status}</code></td><td><code class="constant">1</code></td><td>print the status.</td></tr></tbody></table></div><p>The default verbosity level is <code class="constant">1</code> which means
      that by default all three items are printed.</p></div><div class="section" title="7.3.6. Stages"><div class="titlepage"><div><div><h3 class="title"><a name="idp988800"></a>7.3.6. Stages</h3></div></div></div><p>The stages and the associated flags can be altered by defining
      <code class="varname">$self-&gt;{stage}-&gt;{stages}</code> like this:</p><pre class="programlisting"># Stages of the target system
$self-&gt;{stage}-&gt;{stages} =
{
   'installation' =&gt; 'I',
   'startup' =&gt; 'S'
   'production' =&gt; 'P'
};</pre><p>The flags defined for the stages must not conflict with the
      regular flags (see <a class="xref" href="#conf.changes.flags" title="2.4.1. Flags">Section 2.4.1, &#8220;Flags&#8221;</a>).</p></div><div class="section" title="7.3.7. Change Keywords"><div class="titlepage"><div><div><h3 class="title"><a name="idp992336"></a>7.3.7. Change Keywords</h3></div></div></div><p>The keywords for changes can be altered by modifying
      <code class="varname">$self-&gt;{change}-&gt;{keywords}</code> like this:</p><pre class="programlisting"># Replace the keyword 'directory' by 'mkdir'
delete $self-&gt;{change}-&gt;{keywords}-&gt;{directory};
$self-&gt;{change}-&gt;{keywords}-&gt;{mkdir} = 'directory';

# Add 'package' as keyword for 'yum'
$self-&gt;{change}-&gt;{keywords}-&gt;{package} = 'yum';</pre><p>Similarly the identifier used for changes when displaying them can
      be changed by modifying
      <code class="varname">$self-&gt;{display}-&gt;{keywords}</code>:</p><pre class="programlisting"># Replace the keyword 'directory' by 'mkdir'
$self-&gt;{display}-&gt;{keywords}-&gt;{directory} = 'mkdir';

# Add 'package' as keyword for 'yum'
$self-&gt;{display}-&gt;{keywords}-&gt;{yum} = 'package';</pre><p>The names for the core changes are:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="function">copy</code></p></li><li class="listitem"><p><code class="function">truncate</code></p></li><li class="listitem"><p><code class="function">append</code></p></li><li class="listitem"><p><code class="function">directory</code></p></li><li class="listitem"><p><code class="function">link</code></p></li><li class="listitem"><p><code class="function">symlink</code></p></li><li class="listitem"><p><code class="function">properties</code></p></li><li class="listitem"><p><code class="function">remove</code></p></li><li class="listitem"><p><code class="function">execute</code></p></li></ul></div></div><div class="section" title="7.3.8. Class Match Order"><div class="titlepage"><div><div><h3 class="title"><a name="cust.classes"></a>7.3.8. Class Match Order</h3></div></div></div><p>The search order for the best class match in each feature can be
      customized by modifying <code class="varname">the list referenced by
      $self-&gt;{class}-&gt;{match}</code>. Each list entry is a string
      containing placeholders of the form <em class="replaceable"><code>{item}</code></em>
      which are replaced by the value of the respective system information
      item.</p><p>The default search order is the following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="classname">{host}_{os}_{release}_{arch}</code></p></li><li class="listitem"><p><code class="classname">{host}_{os}_{release}</code></p></li><li class="listitem"><p><code class="classname">{host}_{os}_{arch}</code></p></li><li class="listitem"><p><code class="classname">{host}_{os}</code></p></li><li class="listitem"><p><code class="classname">{host}_{arch}</code></p></li><li class="listitem"><p><code class="classname">{host}</code></p></li><li class="listitem"><p><code class="classname">{properties}_{os}_{release}_{arch}</code></p></li><li class="listitem"><p><code class="classname">{properties}_{os}_{release}</code></p></li><li class="listitem"><p><code class="classname">{properties}_{os}_{arch}</code></p></li><li class="listitem"><p><code class="classname">{properties}_{os}</code></p></li><li class="listitem"><p><code class="classname">{properties}_{arch}</code></p></li><li class="listitem"><p><code class="classname">{properties}</code></p></li><li class="listitem"><p><code class="classname">{os}_{release}_{arch}</code></p></li><li class="listitem"><p><code class="classname">{os}_{release}</code></p></li><li class="listitem"><p><code class="classname">{os}_{arch}</code></p></li><li class="listitem"><p><code class="classname">{os}</code></p></li></ol></div></div></div></div><div lang="en_US" class="appendix" title="Appendix A.  Man Pages"><div class="titlepage"><div><div><h2 class="title"><a name="app.man"></a>Appendix A. 
    Man Pages
  </h2></div></div></div><div class="section" title="A.1. config5"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1028240"></a>A.1. config5</h2></div></div></div><pre class="programlisting">NAME
    config5 - 5th Generation Unix Configuration Management Utility

SYNOPSIS
    config5 [-vqdnhmV] [--selinux|--no-selinux] [--set *key=value*]
    [--apply|--check|--report *type*] [--features dir] [feature...]

DESCRIPTION
    config5 is the main script of the *Config5* Unix Configuration
    Management Kit. It can apply a configuration (feature set), check
    configuration metadata for consistency and give various reports on the
    configuration and the system it is run on.

    When run without arguments it will perform all operations with the full
    set of features. Otherwise it will only process the features specified.
    The feature set location defaults to 'features' in the *Config5* base
    directory and can be altered with the --features otion.

    Information about the system a configuration is appled to is collected
    from data on the system where config5 is run. The collected values can
    be altered using the --set option.

    For detailed documentation consult the "Config5 Systems Administrator's
    Guide".

OPTIONS
    --apply
        Apply the configuration. Either the entire feature set or only the
        features specified on the command line are applied.

    --check
        Perform consistency checks of the entire configuration. Checks
        include syntax checks of the specification files in all features,
        checks for references to missing files and more.

    --report *type*
        Print various reports. The report *type* can be one of:

        *changes*
            Report the keywords for all changes.

        *classes*
            Report all classes in alphabetical order.

        *classorder*
            Report the classes used to match the best class in each feature.
            The classes are reported in the order they are checked and are
            generated using the gathered system information and the values
            set using --set.

        *features*
            Report all classes and changes for all features in a normalized
            form.

        *files*
            Report all files that are modified by any class of all features.

        *matches*
            Report the matching class for each feature using the gathered
            system information and the values set using --set.

        *stages*
            Report all defined target system stages.

        *system*
            Show the various values of the system information.

        *rawsystem*
            Show the various values of the system information as parsable
            output. The output can be sourced by a shell.

        *systemitems*
            Report all configured system information items with description,
            identifier and other meta information.

        For all reports relating to features the report comprises either all
        features or only the features specified on the command line.

    --set *key=value*
        Change the value of one of the system information items.

    --features dir
        Sets the directory containing the feature set.

    --set *key=value*
        Change the value of one of the system information items.

    --selinux or --no-selinux
        Activates or deactivates SELinux support, overrides the
        configuration in the settings.

    --help, -h
        Print a brief help message and exit.

    --man, -m
        Print this manual page and exit.

    --version, -V
        Print the version number of the script and exit.

    --verbose, -v
        Enable verbose messages on the process. Can be specified multiple
        times to increase verbosity.

    --quiet, -q
        Only print errors and warning. This option overrides --verbose.

    --debug, -d
        Enable debugging output. Can be specified multiple times to increase
        the debug level.

    --dummy, -n
        Activate dummy mode where no actual changes are made.

EXIT VALUES
    If there were no errors the program exists with return code 0. Otherwise
    the return code is 1.

EXAMPLES
    "config5"
        Apply the entire configuration.

    "config5 --set root=/var/diskless/host1 --set host=host1"
        Apply the configuration for a diskless client on the server.

    "config5 --report info"
        Report information about the system.

    "config5 --dummy"
        Simulate application of the configuration.

    "config5 --check"
        Check the feature set for consistency and syntax errors.

    "config5 --set host=sample --report matches cifs nfs"
        Report the matching class of features 'nfs' and 'cifs' for host
        'sample'.

</pre></div></div><div lang="en_US" class="appendix" title="Appendix B. Error Messages"><div class="titlepage"><div><div><h2 class="title"><a name="app.err"></a>Appendix B. Error Messages</h2></div></div></div><div class="section" title="B.1. Runtime Errors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1034960"></a>B.1. Runtime Errors</h2></div></div></div><div class="variablelist"><dl><dt><span class="term">Disabled via '<em class="replaceable"><code>file</code></em>'</span></dt><dd><p>Configuration application is disabled because the named
          disable file is present (see <a class="xref" href="#run.disable" title="4.3.4. Disable Configuration Application">Section 4.3.4, &#8220;Disable Configuration Application&#8221;</a>).</p><p>Remove the file to enable configuration application.</p></dd><dt><span class="term">Unable to lock 'file'</span></dt><dd><p>A lock could not be obtained for the lock file.</p><p>Verify that the lock file can be created, is writable and on a
          local file system. Increase the wait time for obtaining the lock
          (see <a class="xref" href="#cust.general" title="7.3.1. General Settings">Section 7.3.1, &#8220;General Settings&#8221;</a>).</p></dd></dl></div></div><div class="section" title="B.2. System Errors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1043024"></a>B.2. System Errors</h2></div></div></div><p>System errors are fatal, no changes will be done to the
    system.</p><div class="variablelist"><dl><dt><span class="term">Cannot run 'lsb_release -&#8230;' to determine &#8230;</span></dt><dd><p>The <span class="command"><strong>lsb_release</strong></span> command could not be
          run.</p><p>Install or deploy the package containing the
          <span class="command"><strong>lsb_release</strong></span> command on all systems where
          <span class="command"><strong>config5</strong></span> is run with the same settings.</p></dd><dt><span class="term">Perl module '<em class="replaceable"><code>module</code></em>' is not installed
        &#8230;</span></dt><dd><p>The named perl module is not installed but either generally
          required or required because of an optional functionality that is
          enabled.</p><p>Install or deploy the named module on all systems where
          <span class="command"><strong>config5</strong></span> is run with the same settings.</p></dd></dl></div></div><div class="section" title="B.3. Setting Errors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1051904"></a>B.3. Setting Errors</h2></div></div></div><p>Setting errors are fatal, no changes will be done to the
    system.</p><div class="variablelist"><dl><dt><span class="term">Cannot load module '<em class="replaceable"><code>module</code></em>' for
        keyword in &#8230;</span></dt><dd><p>The module of the handling class for the change failed to
          load.</p></dd><dt><span class="term">Cannot read feature list in
        '<em class="replaceable"><code>directory</code></em>'</span></dt><dd><p>The features directory could not be read.</p></dd><dt><span class="term">Mandatory system information item
        '<em class="replaceable"><code>item</code></em>' could not be determined</span></dt><dd><p>The settings list the system information item as mandatory but
          the system information module did not set a value for it.</p></dd><dt><span class="term">No handling class for keyword '<span class="emphasis"><em>keyword</em></span>' in
        &#8230;</span></dt><dd><p>The settings do not specify a class to handle changes with
          this keyword.</p></dd><dt><span class="term">Undefined system information item
        '<em class="replaceable"><code>item</code></em>'</span></dt><dd><p>An undefined system information item was used in the class
          match list (see <a class="xref" href="#cust.classes" title="7.3.8. Class Match Order">Section 7.3.8, &#8220;Class Match Order&#8221;</a>.)</p></dd></dl></div></div><div class="section" title="B.4. Configuration Data Errors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1066304"></a>B.4. Configuration Data Errors</h2></div></div></div><p>Configuration data errors are fatal, no changes will be done to the
    system.</p><div class="variablelist"><dl><dt><span class="term">Change '<em class="replaceable"><code>change</code></em>' in feature
        '<em class="replaceable"><code>feature</code></em>' without class</span></dt><dd><p>A change was correctly parsed but no class was
          declared.</p></dd><dt><span class="term">Conflict for '<em class="replaceable"><code>file</code></em>' between &#8230;</span></dt><dd><p>The same file or directory is configured in different
          features.</p></dd><dt><span class="term">Duplicate class '<em class="replaceable"><code>class</code></em>' in feature
        '<em class="replaceable"><code>feature</code></em>'</span></dt><dd><p>The feature contains two declarations of the same
          class.</p></dd><dt><span class="term">Feature '<em class="replaceable"><code>feature</code></em>' does not contain a
        '&#8230;' file</span></dt><dd><p>The feature does not contain a spec file.</p></dd><dt><span class="term">'<em class="replaceable"><code>file</code></em>' is of the wrong type for
        &#8230;</span></dt><dd><p>An <code class="function">append</code> change was used for a path that
          is not a plain file.</p></dd><dt><span class="term">'<em class="replaceable"><code>file</code></em>' needs to be created for
        &#8230;</span></dt><dd><p>An <code class="function">append</code> change for a file was found for
          which there is no matching <code class="function">touch</code> or
          <code class="function">copy</code> change in the same pass.</p></dd><dt><span class="term">Garbage '&#8230;' in &#8230;</span></dt><dd><p>Unexpected arguments were found in a change.</p></dd><dt><span class="term">Insufficient arguments in &#8230;</span></dt><dd><p>The change requires more arguments.</p></dd><dt><span class="term">Invalid flag '<em class="replaceable"><code>flag</code></em>' for &#8230;</span></dt><dd><p>The flag is invalid for the change.</p></dd><dt><span class="term">Invalid mode '<em class="replaceable"><code>mode</code></em>' in &#8230;</span></dt><dd><p>The mode is invalid. See <a class="xref" href="#conf.chg.param" title="2.4.2. Parameters">Section 2.4.2, &#8220;Parameters&#8221;</a> for
          a description of the mode parameter.</p></dd><dt><span class="term">Invalid SELinux context '<em class="replaceable"><code>context</code></em>' in
        &#8230;</span></dt><dd><p>The SELinux context is invalid. See <a class="xref" href="#conf.chg.param.selinux" title="2.4.2.6. SELinux Context">Section 2.4.2.6, &#8220;SELinux Context&#8221;</a> for a list of supported context
          formats.</p></dd><dt><span class="term">Invalid substitution '<em class="replaceable"><code>substitution</code></em>'
        in &#8230;</span></dt><dd><p>The substitution is invalid.</p></dd><dt><span class="term">No file '<em class="replaceable"><code>file</code></em>' in &#8230;</span></dt><dd><p>The file could not be found in the file system of the target
          system or in the feature.</p></dd><dt><span class="term">Path '<em class="replaceable"><code>path</code></em>' is not absolute in
        &#8230;</span></dt><dd><p>The path of the file or directory is not absolute.</p></dd><dt><span class="term">Problem with template &#8230;</span></dt><dd><p><span class="productname">Template Toolkit</span> failed to process
          the content of the source file.</p></dd><dt><span class="term">Recursive reference to class '<em class="replaceable"><code>class</code></em>'
        in class '<span class="emphasis"><em>parent</em></span>'</span></dt><dd><p>A class declaration references an undefined class.</p></dd><dt><span class="term">Reference to undefined class '<em class="replaceable"><code>class</code></em>'
        in class '<em class="replaceable"><code>class</code></em>' in feature
        '<em class="replaceable"><code>feature</code></em>'</span></dt><dd><p>A class declaration references an undefined class.</p></dd><dt><span class="term">Unable to append data in '<em class="replaceable"><code>source</code></em>' to
        '<em class="replaceable"><code>file</code></em>'</span></dt><dd><p>The data from the source file could not be read. Verify that
          the source file exists and is readable.</p></dd><dt><span class="term">Unknown change keyword '<em class="replaceable"><code>keyword</code></em>' in
        &#8230;</span></dt><dd><p>The change with this keyword is unknown.</p></dd><dt><span class="term">Unknown group '<em class="replaceable"><code>group</code></em>' in &#8230;</span></dt><dd><p>The group is unknown or invalid. See <a class="xref" href="#conf.chg.param" title="2.4.2. Parameters">Section 2.4.2, &#8220;Parameters&#8221;</a> for a description of the group
          parameter.</p></dd><dt><span class="term">Unknown user '<em class="replaceable"><code>user</code></em>' in &#8230;</span></dt><dd><p>The user is unknown or invalid. See <a class="xref" href="#conf.chg.param" title="2.4.2. Parameters">Section 2.4.2, &#8220;Parameters&#8221;</a> for a description of the user
          parameter.</p></dd><dt><span class="term">Unparsable line <em class="replaceable"><code>number</code></em> in '&#8230;' file
        for feature '<em class="replaceable"><code>feature</code></em>': &#8230;</span></dt><dd><p>The line is not a valid class declaration or change.</p></dd></dl></div></div><div class="section" title="B.5. Configuration Application Errors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1068112"></a>B.5. Configuration Application Errors</h2></div></div></div><p>The following errors are reported for changes as they are applied
    but do not interrupt the application of other changes.</p><div class="variablelist"><dl><dt><span class="term">Command '<em class="replaceable"><code>command</code></em>' returned
        <em class="replaceable"><code>error</code></em> in &#8230;</span></dt><dd><p>The command returned a non-zero return value. Increase the
          verbosity level to see the output and error messages of the
          command.</p></dd><dt><span class="term">Failed to correctly apply change in &#8230;</span></dt><dd><p>The change could not be correctly applied.</p></dd><dt><span class="term">Unable to chcon '<em class="replaceable"><code>path</code></em>' to
        <em class="replaceable"><code>context</code></em> in &#8230;</span></dt><dd><p>The SELinux context of the file or directory could not be set.
          Verify that the given path is on a file system that has SELinux
          support.</p></dd><dt><span class="term">Unable to chmod '<em class="replaceable"><code>file</code></em>' to mode
        <em class="replaceable"><code>mode</code></em> in &#8230;</span></dt><dd><p>The mode bits of the file or directory could not be
          set.</p></dd><dt><span class="term">Unable to chown '<em class="replaceable"><code>path</code></em>' to
        <em class="replaceable"><code>uid</code></em>:<em class="replaceable"><code>gid</code></em> in
        &#8230;</span></dt><dd><p>The user and group of the file or directory could not be
          set.</p></dd><dt><span class="term">Unable to create directory
        '<em class="replaceable"><code>directory</code></em>' in &#8230;</span></dt><dd><p>The directory could not be created. Verify that the directory
          containing the file exists and that it is in a local, writable file
          system.</p></dd><dt><span class="term">Unable to create link '<em class="replaceable"><code>link</code></em>' to
        '<em class="replaceable"><code>source</code></em>' in &#8230;</span></dt><dd><p>The link to the source path could not be created. Verify that
          the source file exists and is in the same file system as the link.
          Verify that the directory containing the link exists and that it is
          in a local, writable file system.</p></dd><dt><span class="term">Unable to create symbolic link 'link' in &#8230;</span></dt><dd><p>The symbolic link could not be created. Verify that the
          directory containing the symbolic link exists and that it is in a
          local, writable file system.</p></dd><dt><span class="term">Unable to get properties of '<em class="replaceable"><code>file</code></em>' in
        &#8230;</span></dt><dd><p>The properties of an existing file could not be read.</p></dd><dt><span class="term">Unable to open '<em class="replaceable"><code>file</code></em>' for writing in
        &#8230;</span></dt><dd><p>The file could not be opened for writing. Verify that the
          directory containing the file exists and that it is in a local,
          writable file system.</p></dd><dt><span class="term">Unable to remove 'path' in &#8230;</span></dt><dd><p>The file or directory could not be removed Verify that the
          file or directory is in a local, writable file system. When a
          directory is removed it must be empty.</p></dd><dt><span class="term">Unable to rename temporary to '<em class="replaceable"><code>file</code></em>'
        in &#8230;</span></dt><dd><p>The temporary file could not be renamed to the file.</p></dd><dt><span class="term">Unable to write to '<em class="replaceable"><code>file</code></em>' in &#8230;</span></dt><dd><p>An error occurred while writing data to the file. Verify that
          the file system containing the file has enough free space.</p></dd></dl></div></div></div><div lang="en_US" class="appendix" title="Appendix C.  GNU General Public License version 3"><div class="titlepage"><div><div><h2 class="title"><a name="app.gpl"></a>Appendix C. 
    <acronym class="acronym">GNU</acronym> General Public License version 3
  </h2></div></div></div><p>
    Version 3, 29 June 2007
  </p><p>
    Copyright © 2007 Free Software Foundation, Inc.
    <a class="ulink" href="http://fsf.org/" target="_top">http://fsf.org/</a>
  </p><p>
    Everyone is permitted to copy and distribute verbatim copies of this license
    document, but changing it is not allowed.
  </p><h2><a name="Preamble"></a>
    Preamble
  </h2><p>
    The <acronym class="acronym">GNU</acronym> General Public License is a free, copyleft
    license for software and other kinds of works.
  </p><p>
    The licenses for most software and other practical works are designed to
    take away your freedom to share and change the works.  By contrast, the
    <acronym class="acronym">GNU</acronym> General Public License is intended to guarantee your
    freedom to share and change all versions of a program&#8212;to make sure it
    remains free software for all its users.  We, the Free Software Foundation,
    use the <acronym class="acronym">GNU</acronym> General Public License for most of our
    software; it applies also to any other work released this way by its
    authors.  You can apply it to your programs, too.
  </p><p>
    When we speak of free software, we are referring to freedom, not price.  Our
    General Public Licenses are designed to make sure that you have the freedom
    to distribute copies of free software (and charge for them if you wish),
    that you receive source code or can get it if you want it, that you can
    change the software or use pieces of it in new free programs, and that you
    know you can do these things.
  </p><p>
    To protect your rights, we need to prevent others from denying you these
    rights or asking you to surrender the rights.  Therefore, you have certain
    responsibilities if you distribute copies of the software, or if you modify
    it: responsibilities to respect the freedom of others.
  </p><p>
    For example, if you distribute copies of such a program, whether gratis or
    for a fee, you must pass on to the recipients the same freedoms that you
    received.  You must make sure that they, too, receive or can get the source
    code.  And you must show them these terms so they know their rights.
  </p><p>
    Developers that use the <acronym class="acronym">GNU</acronym> <acronym class="acronym">GPL</acronym>
    protect your rights with two steps: (1) assert copyright on the software,
    and (2) offer you this License giving you legal permission to copy,
    distribute and/or modify it.
  </p><p>
    For the developers&#8217; and authors&#8217; protection, the
    <acronym class="acronym">GPL</acronym> clearly explains that there is no warranty for this
    free software.  For both users&#8217; and authors&#8217; sake, the
    <acronym class="acronym">GPL</acronym> requires that modified versions be marked as changed,
    so that their problems will not be attributed erroneously to authors of
    previous versions.
  </p><p>
    Some devices are designed to deny users access to install or run modified
    versions of the software inside them, although the manufacturer can do so.
    This is fundamentally incompatible with the aim of protecting users&#8217;
    freedom to change the software.  The systematic pattern of such abuse occurs
    in the area of products for individuals to use, which is precisely where it
    is most unacceptable.  Therefore, we have designed this version of the
    <acronym class="acronym">GPL</acronym> to prohibit the practice for those products.  If such
    problems arise substantially in other domains, we stand ready to extend this
    provision to those domains in future versions of the <acronym class="acronym">GPL</acronym>,
    as needed to protect the freedom of users.
  </p><p>
    Finally, every program is threatened constantly by software patents.  States
    should not allow patents to restrict development and use of software on
    general-purpose computers, but in those that do, we wish to avoid the
    special danger that patents applied to a free program could make it
    effectively proprietary.  To prevent this, the <acronym class="acronym">GPL</acronym>
    assures that patents cannot be used to render the program non-free.
  </p><p>
    The precise terms and conditions for copying, distribution and modification
    follow.
  </p><h2><a name="idp1178304"></a>
    TERMS AND CONDITIONS
  </h2><h2><a name="Definitions"></a>
    0. Definitions.
  </h2><p>
    &#8220;This License&#8221; refers to version 3 of the <acronym class="acronym">GNU</acronym>
    General Public License.
  </p><p>
    &#8220;Copyright&#8221; also means copyright-like laws that apply to other
    kinds of works, such as semiconductor masks.
  </p><p>
    &#8220;The Program&#8221; refers to any copyrightable work licensed under
    this License.  Each licensee is addressed as &#8220;you&#8221;.
    &#8220;Licensees&#8221; and &#8220;recipients&#8221; may be individuals or
    organizations.
  </p><p>
    To &#8220;modify&#8221; a work means to copy from or adapt all or part of
    the work in a fashion requiring copyright permission, other than the making
    of an exact copy.  The resulting work is called a &#8220;modified
    version&#8221; of the earlier work or a work &#8220;based on&#8221; the
    earlier work.
  </p><p>
    A &#8220;covered work&#8221; means either the unmodified Program or a work
    based on the Program.
  </p><p>
    To &#8220;propagate&#8221; a work means to do anything with it that, without
    permission, would make you directly or secondarily liable for infringement
    under applicable copyright law, except executing it on a computer or
    modifying a private copy.  Propagation includes copying, distribution (with
    or without modification), making available to the public, and in some
    countries other activities as well.
  </p><p>
    To &#8220;convey&#8221; a work means any kind of propagation that enables
    other parties to make or receive copies.  Mere interaction with a user
    through a computer network, with no transfer of a copy, is not conveying.
  </p><p>
    An interactive user interface displays &#8220;Appropriate Legal
    Notices&#8221; to the extent that it includes a convenient and prominently
    visible feature that (1) displays an appropriate copyright notice, and (2)
    tells the user that there is no warranty for the work (except to the extent
    that warranties are provided), that licensees may convey the work under this
    License, and how to view a copy of this License.  If the interface presents
    a list of user commands or options, such as a menu, a prominent item in the
    list meets this criterion.
  </p><h2><a name="SourceCode"></a>
    1. Source Code.
  </h2><p>
    The &#8220;source code&#8221; for a work means the preferred form of the
    work for making modifications to it.  &#8220;Object code&#8221; means any
    non-source form of a work.
  </p><p>
    A &#8220;Standard Interface&#8221; means an interface that either is an
    official standard defined by a recognized standards body, or, in the case of
    interfaces specified for a particular programming language, one that is
    widely used among developers working in that language.
  </p><p>
    The &#8220;System Libraries&#8221; of an executable work include anything,
    other than the work as a whole, that (a) is included in the normal form of
    packaging a Major Component, but which is not part of that Major Component,
    and (b) serves only to enable use of the work with that Major Component, or
    to implement a Standard Interface for which an implementation is available
    to the public in source code form.  A &#8220;Major Component&#8221;, in this
    context, means a major essential component (kernel, window system, and so
    on) of the specific operating system (if any) on which the executable work
    runs, or a compiler used to produce the work, or an object code interpreter
    used to run it.
  </p><p>
    The &#8220;Corresponding Source&#8221; for a work in object code form means
    all the source code needed to generate, install, and (for an executable
    work) run the object code and to modify the work, including scripts to
    control those activities.  However, it does not include the work&#8217;s
    System Libraries, or general-purpose tools or generally available free
    programs which are used unmodified in performing those activities but which
    are not part of the work.  For example, Corresponding Source includes
    interface definition files associated with source files for the work, and
    the source code for shared libraries and dynamically linked subprograms that
    the work is specifically designed to require, such as by intimate data
    communication or control flow between those subprograms and other parts of
    the work.
  </p><p>
    The Corresponding Source need not include anything that users can regenerate
    automatically from other parts of the Corresponding Source.
  </p><p>
    The Corresponding Source for a work in source code form is that same work.
  </p><h2><a name="BasicPermissions"></a>
    2. Basic Permissions.
  </h2><p>
    All rights granted under this License are granted for the term of copyright
    on the Program, and are irrevocable provided the stated conditions are met.
    This License explicitly affirms your unlimited permission to run the
    unmodified Program.  The output from running a covered work is covered by
    this License only if the output, given its content, constitutes a covered
    work.  This License acknowledges your rights of fair use or other
    equivalent, as provided by copyright law.
  </p><p>
    You may make, run and propagate covered works that you do not convey,
    without conditions so long as your license otherwise remains in force.  You
    may convey covered works to others for the sole purpose of having them make
    modifications exclusively for you, or provide you with facilities for
    running those works, provided that you comply with the terms of this License
    in conveying all material for which you do not control copyright.  Those
    thus making or running the covered works for you must do so exclusively on
    your behalf, under your direction and control, on terms that prohibit them
    from making any copies of your copyrighted material outside their
    relationship with you.
  </p><p>
    Conveying under any other circumstances is permitted solely under the
    conditions stated below.  Sublicensing is not allowed; section 10 makes it
    unnecessary.
  </p><h2><a name="Protecting"></a>
    3. Protecting Users&#8217; Legal Rights From Anti-Circumvention Law.
  </h2><p>
    No covered work shall be deemed part of an effective technological measure
    under any applicable law fulfilling obligations under article 11 of the WIPO
    copyright treaty adopted on 20 December 1996, or similar laws prohibiting or
    restricting circumvention of such measures.
  </p><p>
    When you convey a covered work, you waive any legal power to forbid
    circumvention of technological measures to the extent such circumvention is
    effected by exercising rights under this License with respect to the covered
    work, and you disclaim any intention to limit operation or modification of
    the work as a means of enforcing, against the work&#8217;s users, your or
    third parties&#8217; legal rights to forbid circumvention of technological
    measures.
  </p><h2><a name="ConveyingVerbatim"></a>
    4. Conveying Verbatim Copies.
  </h2><p>
    You may convey verbatim copies of the Program&#8217;s source code as you
    receive it, in any medium, provided that you conspicuously and appropriately
    publish on each copy an appropriate copyright notice; keep intact all
    notices stating that this License and any non-permissive terms added in
    accord with section 7 apply to the code; keep intact all notices of the
    absence of any warranty; and give all recipients a copy of this License
    along with the Program.
  </p><p>
    You may charge any price or no price for each copy that you convey, and you
    may offer support or warranty protection for a fee.
  </p><h2><a name="ConveyingModified"></a>
    5. Conveying Modified Source Versions.
  </h2><p>
    You may convey a work based on the Program, or the modifications to produce
    it from the Program, in the form of source code under the terms of section
    4, provided that you also meet all of these conditions:
  </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>
        The work must carry prominent notices stating that you modified it, and
        giving a relevant date.
      </p></li><li class="listitem"><p>
        The work must carry prominent notices stating that it is released under
        this License and any conditions added under section 7.  This requirement
        modifies the requirement in section 4 to &#8220;keep intact all
        notices&#8221;.
      </p></li><li class="listitem"><p>
        You must license the entire work, as a whole, under this License to
        anyone who comes into possession of a copy.  This License will therefore
        apply, along with any applicable section 7 additional terms, to the
        whole of the work, and all its parts, regardless of how they are
        packaged.  This License gives no permission to license the work in any
        other way, but it does not invalidate such permission if you have
        separately received it.
      </p></li><li class="listitem"><p>
        If the work has interactive user interfaces, each must display
        Appropriate Legal Notices; however, if the Program has interactive
        interfaces that do not display Appropriate Legal Notices, your work need
        not make them do so.
      </p></li></ol></div><p>
    A compilation of a covered work with other separate and independent works,
    which are not by their nature extensions of the covered work, and which are
    not combined with it such as to form a larger program, in or on a volume of
    a storage or distribution medium, is called an &#8220;aggregate&#8221; if
    the compilation and its resulting copyright are not used to limit the access
    or legal rights of the compilation&#8217;s users beyond what the individual works
    permit.  Inclusion of a covered work in an aggregate does not cause
    this License to apply to the other parts of the aggregate.
  </p><h2><a name="ConveyingNonSource"></a>
    6. Conveying Non-Source Forms.
  </h2><p>
    You may convey a covered work in object code form under the terms of
    sections 4 and 5, provided that you also convey the machine-readable
    Corresponding Source under the terms of this License, in one of these ways:
  </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>
        Convey the object code in, or embodied in, a physical product (including
        a physical distribution medium), accompanied by the Corresponding Source
        fixed on a durable physical medium customarily used for software
        interchange.
      </p></li><li class="listitem"><p>
        Convey the object code in, or embodied in, a physical product (including
        a physical distribution medium), accompanied by a written offer, valid
        for at least three years and valid for as long as you offer spare parts
        or customer support for that product model, to give anyone who possesses
        the object code either (1) a copy of the Corresponding Source for all
        the software in the product that is covered by this License, on a
        durable physical medium customarily used for software interchange, for a
        price no more than your reasonable cost of physically performing this
        conveying of source, or (2) access to copy the Corresponding Source from
        a network server at no charge.
      </p></li><li class="listitem"><p>
        Convey individual copies of the object code with a copy of the written
        offer to provide the Corresponding Source.  This alternative is allowed
        only occasionally and noncommercially, and only if you received the
        object code with such an offer, in accord with subsection 6b.
      </p></li><li class="listitem"><p>
        Convey the object code by offering access from a designated place
        (gratis or for a charge), and offer equivalent access to the
        Corresponding Source in the same way through the same place at no
        further charge.  You need not require recipients to copy the
        Corresponding Source along with the object code.  If the place to copy
        the object code is a network server, the Corresponding Source may be on
        a different server (operated by you or a third party) that supports
        equivalent copying facilities, provided you maintain clear directions
        next to the object code saying where to find the Corresponding Source.
        Regardless of what server hosts the Corresponding Source, you remain
        obligated to ensure that it is available for as long as needed to
        satisfy these requirements.
      </p></li><li class="listitem"><p>
        Convey the object code using peer-to-peer transmission, provided you
        inform other peers where the object code and Corresponding Source of the
        work are being offered to the general public at no charge under
        subsection 6d.
      </p></li></ol></div><p>
    A separable portion of the object code, whose source code is excluded from
    the Corresponding Source as a System Library, need not be included in
    conveying the object code work.
  </p><p>
    A &#8220;User Product&#8221; is either (1) a &#8220;consumer product&#8221;,
    which means any tangible personal property which is normally used for
    personal, family, or household purposes, or (2) anything designed or sold
    for incorporation into a dwelling.  In determining whether a product is a
    consumer product, doubtful cases shall be resolved in favor of coverage.
    For a particular product received by a particular user, &#8220;normally
    used&#8221; refers to a typical or common use of that class of product,
    regardless of the status of the particular user or of the way in which the
    particular user actually uses, or expects or is expected to use, the
    product.  A product is a consumer product regardless of whether the product
    has substantial commercial, industrial or non-consumer uses, unless such
    uses represent the only significant mode of use of the product.
  </p><p>
    &#8220;Installation Information&#8221; for a User Product means any methods,
    procedures, authorization keys, or other information required to install and
    execute modified versions of a covered work in that User Product from a
    modified version of its Corresponding Source.  The information must suffice
    to ensure that the continued functioning of the modified object code is in
    no case prevented or interfered with solely because modification has been
    made.
  </p><p>
    If you convey an object code work under this section in, or with, or
    specifically for use in, a User Product, and the conveying occurs as part of
    a transaction in which the right of possession and use of the User Product
    is transferred to the recipient in perpetuity or for a fixed term
    (regardless of how the transaction is characterized), the Corresponding
    Source conveyed under this section must be accompanied by the Installation
    Information.  But this requirement does not apply if neither you nor any
    third party retains the ability to install modified object code on the User
    Product (for example, the work has been installed in
    <acronym class="acronym">ROM</acronym>).
  </p><p>
    The requirement to provide Installation Information does not include a
    requirement to continue to provide support service, warranty, or updates for
    a work that has been modified or installed by the recipient, or for the User
    Product in which it has been modified or installed.  Access to a network may
    be denied when the modification itself materially and adversely affects the
    operation of the network or violates the rules and protocols for
    communication across the network.
  </p><p>
    Corresponding Source conveyed, and Installation Information provided, in
    accord with this section must be in a format that is publicly documented
    (and with an implementation available to the public in source code form),
    and must require no special password or key for unpacking, reading or
    copying.
  </p><h2><a name="AdditionalTerms"></a>
     7. Additional Terms.
   </h2><p>
     &#8220;Additional permissions&#8221; are terms that supplement the terms of
     this License by making exceptions from one or more of its conditions.
     Additional permissions that are applicable to the entire Program shall be
     treated as though they were included in this License, to the extent that
     they are valid under applicable law.  If additional permissions apply only
     to part of the Program, that part may be used separately under those
     permissions, but the entire Program remains governed by this License
     without regard to the additional permissions.
   </p><p>
     When you convey a copy of a covered work, you may at your option remove any
     additional permissions from that copy, or from any part of it.  (Additional
     permissions may be written to require their own removal in certain cases
     when you modify the work.)  You may place additional permissions on
     material, added by you to a covered work, for which you have or can give
     appropriate copyright permission.
   </p><p>
     Notwithstanding any other provision of this License, for material you add
     to a covered work, you may (if authorized by the copyright holders of that
     material) supplement the terms of this License with terms:
   </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>
         Disclaiming warranty or limiting liability differently from the terms
         of sections 15 and 16 of this License; or
       </p></li><li class="listitem"><p>
         Requiring preservation of specified reasonable legal notices or author
         attributions in that material or in the Appropriate Legal Notices
         displayed by works containing it; or
       </p></li><li class="listitem"><p>
         Prohibiting misrepresentation of the origin of that material, or
         requiring that modified versions of such material be marked in
         reasonable ways as different from the original version; or
       </p></li><li class="listitem"><p>
         Limiting the use for publicity purposes of names of licensors or
         authors of the material; or
       </p></li><li class="listitem"><p>
         Declining to grant rights under trademark law for use of some trade
         names, trademarks, or service marks; or
       </p></li><li class="listitem"><p>
         Requiring indemnification of licensors and authors of that material by
         anyone who conveys the material (or modified versions of it) with
         contractual assumptions of liability to the recipient, for any
         liability that these contractual assumptions directly impose on those
         licensors and authors.
       </p></li></ol></div><p>
     All other non-permissive additional terms are considered &#8220;further
     restrictions&#8221; within the meaning of section 10.  If the Program as
     you received it, or any part of it, contains a notice stating that it is
     governed by this License along with a term that is a further restriction,
     you may remove that term.  If a license document contains a further
     restriction but permits relicensing or conveying under this License, you
     may add to a covered work material governed by the terms of that license
     document, provided that the further restriction does not survive such
     relicensing or conveying.
   </p><p>
     If you add terms to a covered work in accord with this section, you must
     place, in the relevant source files, a statement of the additional terms
     that apply to those files, or a notice indicating where to find the
     applicable terms.
   </p><p>
     Additional terms, permissive or non-permissive, may be stated in the form
     of a separately written license, or stated as exceptions; the above
     requirements apply either way.
   </p><h2><a name="Termination"></a>
     8. Termination.
   </h2><p>
     You may not propagate or modify a covered work except as expressly provided
     under this License.  Any attempt otherwise to propagate or modify it is
     void, and will automatically terminate your rights under this License
     (including any patent licenses granted under the third paragraph of section
     11).
   </p><p>
     However, if you cease all violation of this License, then your license from
     a particular copyright holder is reinstated (a) provisionally, unless and
     until the copyright holder explicitly and finally terminates your license,
     and (b) permanently, if the copyright holder fails to notify you of the
     violation by some reasonable means prior to 60 days after the cessation.
   </p><p>
     Moreover, your license from a particular copyright holder is reinstated
     permanently if the copyright holder notifies you of the violation by some
     reasonable means, this is the first time you have received notice of
     violation of this License (for any work) from that copyright holder, and
     you cure the violation prior to 30 days after your receipt of the notice.
   </p><p>
     Termination of your rights under this section does not terminate the
     licenses of parties who have received copies or rights from you under this
     License.  If your rights have been terminated and not permanently
     reinstated, you do not qualify to receive new licenses for the same
     material under section 10.
   </p><h2><a name="AcceptanceNotRequired"></a>
     9. Acceptance Not Required for Having Copies.
   </h2><p>
     You are not required to accept this License in order to receive or run a
     copy of the Program.  Ancillary propagation of a covered work occurring
     solely as a consequence of using peer-to-peer transmission to receive a
     copy likewise does not require acceptance.  However, nothing other than
     this License grants you permission to propagate or modify any covered work.
     These actions infringe copyright if you do not accept this License.
     Therefore, by modifying or propagating a covered work, you indicate your
     acceptance of this License to do so.
   </p><h2><a name="AutomaticDownstream"></a>
     10. Automatic Licensing of Downstream Recipients.
   </h2><p>
     Each time you convey a covered work, the recipient automatically receives a
     license from the original licensors, to run, modify and propagate that
     work, subject to this License.  You are not responsible for enforcing
     compliance by third parties with this License.
   </p><p>
     An &#8220;entity transaction&#8221; is a transaction transferring control
     of an organization, or substantially all assets of one, or subdividing an
     organization, or merging organizations.  If propagation of a covered work
     results from an entity transaction, each party to that transaction who
     receives a copy of the work also receives whatever licenses to the work the
     party&#8217;s predecessor in interest had or could give under the previous
     paragraph, plus a right to possession of the Corresponding Source of the
     work from the predecessor in interest, if the predecessor has it or can get
     it with reasonable efforts.
   </p><p>
     You may not impose any further restrictions on the exercise of the rights
     granted or affirmed under this License.  For example, you may not impose a
     license fee, royalty, or other charge for exercise of rights granted under
     this License, and you may not initiate litigation (including a cross-claim
     or counterclaim in a lawsuit) alleging that any patent claim is infringed
     by making, using, selling, offering for sale, or importing the Program or
     any portion of it.
   </p><h2><a name="Patents"></a>
    11. Patents.
  </h2><p>
    A &#8220;contributor&#8221; is a copyright holder who authorizes use under
    this License of the Program or a work on which the Program is based.  The
    work thus licensed is called the contributor&#8217;s &#8220;contributor
    version&#8221;.
  </p><p>
    A contributor&#8217;s &#8220;essential patent claims&#8221; are all patent
    claims owned or controlled by the contributor, whether already acquired or
    hereafter acquired, that would be infringed by some manner, permitted by
    this License, of making, using, or selling its contributor version, but do
    not include claims that would be infringed only as a consequence of further
    modification of the contributor version.  For purposes of this definition,
    &#8220;control&#8221; includes the right to grant patent sublicenses in a
    manner consistent with the requirements of this License.
  </p><p>
    Each contributor grants you a non-exclusive, worldwide, royalty-free patent
    license under the contributor&#8217;s essential patent claims, to make, use,
    sell, offer for sale, import and otherwise run, modify and propagate the
    contents of its contributor version.
  </p><p>
    In the following three paragraphs, a &#8220;patent license&#8221; is any
    express agreement or commitment, however denominated, not to enforce a
    patent (such as an express permission to practice a patent or covenant not
    to sue for patent infringement).  To &#8220;grant&#8221; such a patent
    license to a party means to make such an agreement or commitment not to
    enforce a patent against the party.
  </p><p>
    If you convey a covered work, knowingly relying on a patent license, and the
    Corresponding Source of the work is not available for anyone to copy, free
    of charge and under the terms of this License, through a publicly available
    network server or other readily accessible means, then you must either (1)
    cause the Corresponding Source to be so available, or (2) arrange to deprive
    yourself of the benefit of the patent license for this particular work, or
    (3) arrange, in a manner consistent with the requirements of this License,
    to extend the patent license to downstream recipients.  &#8220;Knowingly
    relying&#8221; means you have actual knowledge that, but for the patent
    license, your conveying the covered work in a country, or your
    recipient&#8217;s use of the covered work in a country, would infringe one
    or more identifiable patents in that country that you have reason to believe
    are valid.
  </p><p>
    If, pursuant to or in connection with a single transaction or arrangement,
    you convey, or propagate by procuring conveyance of, a covered work, and
    grant a patent license to some of the parties receiving the covered work
    authorizing them to use, propagate, modify or convey a specific copy of the
    covered work, then the patent license you grant is automatically extended to
    all recipients of the covered work and works based on it.
  </p><p>
    A patent license is &#8220;discriminatory&#8221; if it does not include
    within the scope of its coverage, prohibits the exercise of, or is
    conditioned on the non-exercise of one or more of the rights that are
    specifically granted under this License.  You may not convey a covered work
    if you are a party to an arrangement with a third party that is in the
    business of distributing software, under which you make payment to the third
    party based on the extent of your activity of conveying the work, and under
    which the third party grants, to any of the parties who would receive the
    covered work from you, a discriminatory patent license (a) in connection
    with copies of the covered work conveyed by you (or copies made from those
    copies), or (b) primarily for and in connection with specific products or
    compilations that contain the covered work, unless you entered into that
    arrangement, or that patent license was granted, prior to 28 March 2007.
  </p><p>
    Nothing in this License shall be construed as excluding or limiting any
    implied license or other defenses to infringement that may otherwise be
    available to you under applicable patent law.
  </p><h2><a name="NoSurrender"></a>
    12. No Surrender of Others&#8217; Freedom.
  </h2><p>
    If conditions are imposed on you (whether by court order, agreement or
    otherwise) that contradict the conditions of this License, they do not
    excuse you from the conditions of this License.  If you cannot convey a
    covered work so as to satisfy simultaneously your obligations under this
    License and any other pertinent obligations, then as a consequence you may
    not convey it at all.  For example, if you agree to terms that obligate you
    to collect a royalty for further conveying from those to whom you convey the
    Program, the only way you could satisfy both those terms and this License
    would be to refrain entirely from conveying the Program.
  </p><h2><a name="UsedWithAGPL"></a>
    13. Use with the <acronym class="acronym">GNU</acronym> Affero General Public License.
  </h2><p>
    Notwithstanding any other provision of this License, you have permission to
    link or combine any covered work with a work licensed under version 3 of the
    <acronym class="acronym">GNU</acronym> Affero General Public License into a single combined
    work, and to convey the resulting work.  The terms of this License will
    continue to apply to the part which is the covered work, but the special
    requirements of the <acronym class="acronym">GNU</acronym> Affero General Public License,
    section 13, concerning interaction through a network will apply to the
    combination as such.
  </p><h2><a name="RevisedVersions"></a>
    14. Revised Versions of this License.
  </h2><p>
    The Free Software Foundation may publish revised and/or new versions of the
    <acronym class="acronym">GNU</acronym> General Public License from time to time.  Such new
    versions will be similar in spirit to the present version, but may differ in
    detail to address new problems or concerns.
  </p><p>
    Each version is given a distinguishing version number.  If the Program
    specifies that a certain numbered version of the <acronym class="acronym">GNU</acronym>
    General Public License &#8220;or any later version&#8221; applies to it, you
    have the option of following the terms and conditions either of that
    numbered version or of any later version published by the Free Software
    Foundation.  If the Program does not specify a version number of the
    <acronym class="acronym">GNU</acronym> General Public License, you may choose any version
    ever published by the Free Software Foundation.
  </p><p>
    If the Program specifies that a proxy can decide which future versions of
    the <acronym class="acronym">GNU</acronym> General Public License can be used, that
    proxy&#8217;s public statement of acceptance of a version permanently
    authorizes you to choose that version for the Program.
  </p><p>
    Later license versions may give you additional or different permissions.
    However, no additional obligations are imposed on any author or copyright
    holder as a result of your choosing to follow a later version.
  </p><h2><a name="WarrantyDisclaimer"></a>
    15. Disclaimer of Warranty.
  </h2><p>
    THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE
    LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
    OTHER PARTIES PROVIDE THE PROGRAM &#8220;AS IS&#8221; WITHOUT WARRANTY OF
    ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
    IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
    THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH
    YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL
    NECESSARY SERVICING, REPAIR OR CORRECTION.
  </p><h2><a name="LiabilityLimitation"></a>
    16. Limitation of Liability.
  </h2><p>
    IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL
    ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE
    PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY
    GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE
    OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA
    OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD
    PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),
    EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF
    SUCH DAMAGES.
  </p><h2><a name="InterpretationSecs1516"></a>
    17. Interpretation of Sections 15 and 16.
  </h2><p>
    If the disclaimer of warranty and limitation of liability provided above
    cannot be given local legal effect according to their terms, reviewing
    courts shall apply local law that most closely approximates an absolute
    waiver of all civil liability in connection with the Program, unless a
    warranty or assumption of liability accompanies a copy of the Program in
    return for a fee.
  </p><h2><a name="idp1273984"></a>
    END OF TERMS AND CONDITIONS
  </h2><h2><a name="HowToApply"></a>
    How to Apply These Terms to Your New Programs
  </h2><p>
    If you develop a new program, and you want it to be of the greatest possible
    use to the public, the best way to achieve this is to make it free software
    which everyone can redistribute and change under these terms.
  </p><p>
    To do so, attach the following notices to the program.  It is safest to
    attach them to the start of each source file to most effectively state the
    exclusion of warranty; and each file should have at least the
    &#8220;copyright&#8221; line and a pointer to where the full notice is
    found.
  </p><pre class="screen">
<em class="replaceable"><code>one line to give the program&#8217;s name and a brief idea of what it does.</code></em>
Copyright (C) <em class="replaceable"><code>year</code></em> <em class="replaceable"><code>name of author</code></em>

This program is free software: you can redistribute it and/or modify
it under the terms of the <acronym class="acronym">GNU</acronym> General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<acronym class="acronym">GNU</acronym> General Public License for more details.

You should have received a copy of the <acronym class="acronym">GNU</acronym> General Public License
along with this program.  If not, see <a class="ulink" href="http://www.gnu.org/licenses/" target="_top">http://www.gnu.org/licenses/</a>.
  </pre><p>
    Also add information on how to contact you by electronic and paper mail.
  </p><p>
    If the program does terminal interaction, make it output a short notice like
    this when it starts in an interactive mode:
  </p><pre class="screen">
<em class="replaceable"><code>program</code></em> Copyright (C) <em class="replaceable"><code>year</code></em> <em class="replaceable"><code>name of author</code></em>
This program comes with ABSOLUTELY NO WARRANTY; for details type &#8216;<code class="literal">show w</code>&#8217;.
This is free software, and you are welcome to redistribute it
under certain conditions; type &#8216;<code class="literal">show c</code>&#8217; for details.
  </pre><p>
    The hypothetical commands &#8216;<code class="literal">show w</code>&#8217; and
    &#8216;<code class="literal">show c</code>&#8217; should show the appropriate parts of
    the General Public License.  Of course, your program&#8217;s commands might be
    different; for a GUI interface, you would use an &#8220;about box&#8221;.
  </p><p>
    You should also get your employer (if you work as a programmer) or school,
    if any, to sign a &#8220;copyright disclaimer&#8221; for the program, if
    necessary.  For more information on this, and how to apply and follow the
    <acronym class="acronym">GNU</acronym> <acronym class="acronym">GPL</acronym>, see
    <a class="ulink" href="http://www.gnu.org/licenses/" target="_top">http://www.gnu.org/licenses/</a>.
  </p><p>
    The <acronym class="acronym">GNU</acronym> General Public License does not permit
    incorporating your program into proprietary programs.  If your program is a
    subroutine library, you may consider it more useful to permit linking
    proprietary applications with the library.  If this is what you want to do,
    use the <acronym class="acronym">GNU</acronym> Lesser General Public License instead of this
    License.  But first, please read <a class="ulink" href="http://www.gnu.org/philosophy/why-not-lgpl.html" target="_top">http://www.gnu.org/philosophy/why-not-lgpl.html</a>.
  </p></div><div lang="en_US" class="appendix" title="Appendix D. GNU Free Documentation License"><div class="titlepage"><div><div><h2 class="title"><a name="app.fdl"></a>Appendix D. GNU Free Documentation License</h2></div></div></div><p>Version 1.3, 3 November 2008</p><p>
    Copyright © 2000, 2001, 2002, 2007, 2008
    <a class="ulink" href="http://fsf.org/" target="_top">Free Software Foundation, Inc.</a>
  </p><p>
    Everyone is permitted to copy and distribute verbatim copies of this
    license document, but changing it is not allowed.
  </p><h3><a name="section0"></a>
    0. PREAMBLE
  </h3><p>
    The purpose of this License is to make a manual, textbook, or other
    functional and useful document &#8220;free&#8221; in the sense of freedom:
    to assure everyone the effective freedom to copy and redistribute it, with
    or without modifying it, either commercially or
    noncommercially. Secondarily, this License preserves for the author and
    publisher a way to get credit for their work, while not being considered
    responsible for modifications made by others.
  </p><p>
    This License is a kind of &#8220;copyleft&#8221;, which means that
    derivative works of the document must themselves be free in the same
    sense. It complements the GNU General Public License, which is a copyleft
    license designed for free software.
  </p><p>
    We have designed this License in order to use it for manuals for free
    software, because free software needs free documentation: a free program
    should come with manuals providing the same freedoms that the software
    does. But this License is not limited to software manuals; it can be used
    for any textual work, regardless of subject matter or whether it is
    published as a printed book. We recommend this License principally for
    works whose purpose is instruction or reference.
  </p><h3><a name="section1"></a>
    1. APPLICABILITY AND DEFINITIONS
  </h3><p>
    This License applies to any manual or other work, in any medium, that
    contains a notice placed by the copyright holder saying it can be
    distributed under the terms of this License. Such a notice grants a
    world-wide, royalty-free license, unlimited in duration, to use that work
    under the conditions stated herein. The &#8220;Document&#8221;, below,
    refers to any such manual or work. Any member of the public is a licensee,
    and is addressed as &#8220;you&#8221;. You accept the license if you copy,
    modify or distribute the work in a way requiring permission under
    copyright law.
  </p><p>
    A &#8220;Modified Version&#8221; of the Document means any work containing
    the Document or a portion of it, either copied verbatim, or with
    modifications and/or translated into another language.
  </p><p>
    A &#8220;Secondary Section&#8221; is a named appendix or a front-matter
    section of the Document that deals exclusively with the relationship of
    the publishers or authors of the Document to the Document&#8217;s overall
    subject (or to related matters) and contains nothing that could fall
    directly within that overall subject. (Thus, if the Document is in part a
    textbook of mathematics, a Secondary Section may not explain any
    mathematics.) The relationship could be a matter of historical connection
    with the subject or with related matters, or of legal, commercial,
    philosophical, ethical or political position regarding them.
  </p><p>
    The &#8220;Invariant Sections&#8221; are certain Secondary Sections whose
    titles are designated, as being those of Invariant Sections, in the notice
    that says that the Document is released under this License. If a section
    does not fit the above definition of Secondary then it is not allowed to
    be designated as Invariant. The Document may contain zero Invariant
    Sections. If the Document does not identify any Invariant Sections then
    there are none.
  </p><p>
    The &#8220;Cover Texts&#8221; are certain short passages of text that are
    listed, as Front-Cover Texts or Back-Cover Texts, in the notice that says
    that the Document is released under this License. A Front-Cover Text may
    be at most 5 words, and a Back-Cover Text may be at most 25 words.
  </p><p>
    A &#8220;Transparent&#8221; copy of the Document means a machine-readable
    copy, represented in a format whose specification is available to the
    general public, that is suitable for revising the document
    straightforwardly with generic text editors or (for images composed of
    pixels) generic paint programs or (for drawings) some widely available
    drawing editor, and that is suitable for input to text formatters or for
    automatic translation to a variety of formats suitable for input to text
    formatters. A copy made in an otherwise Transparent file format whose
    markup, or absence of markup, has been arranged to thwart or discourage
    subsequent modification by readers is not Transparent. An image format is
    not Transparent if used for any substantial amount of text. A copy that is
    not &#8220;Transparent&#8221; is called &#8220;Opaque&#8221;.
  </p><p>
    Examples of suitable formats for Transparent copies include plain ASCII
    without markup, Texinfo input format, LaTeX input format, SGML or XML
    using a publicly available DTD, and standard-conforming simple HTML,
    PostScript or PDF designed for human modification. Examples of transparent
    image formats include PNG, XCF and JPG. Opaque formats include proprietary
    formats that can be read and edited only by proprietary word processors,
    SGML or XML for which the DTD and/or processing tools are not generally
    available, and the machine-generated HTML, PostScript or PDF produced by
    some word processors for output purposes only.
  </p><p>
    The &#8220;Title Page&#8221; means, for a printed book, the title page
    itself, plus such following pages as are needed to hold, legibly, the
    material this License requires to appear in the title page. For works in
    formats which do not have any title page as such, &#8220;Title Page&#8221;
    means the text near the most prominent appearance of the work&#8217;s
    title, preceding the beginning of the body of the text.
  </p><p>
    The &#8220;publisher&#8221; means any person or entity that distributes
    copies of the Document to the public.
  </p><p>
    A section &#8220;Entitled XYZ&#8221; means a named subunit of the Document
    whose title either is precisely XYZ or contains XYZ in parentheses
    following text that translates XYZ in another language. (Here XYZ stands
    for a specific section name mentioned below, such as
    &#8220;Acknowledgements&#8221;, &#8220;Dedications&#8221;,
    &#8220;Endorsements&#8221;, or &#8220;History&#8221;.) To &#8220;Preserve
    the Title&#8221; of such a section when you modify the Document means that
    it remains a section &#8220;Entitled XYZ&#8221; according to this
    definition.
  </p><p>
    The Document may include Warranty Disclaimers next to the notice which
    states that this License applies to the Document. These Warranty
    Disclaimers are considered to be included by reference in this License,
    but only as regards disclaiming warranties: any other implication that
    these Warranty Disclaimers may have is void and has no effect on the
    meaning of this License.
  </p><h3><a name="section2"></a>
    2. VERBATIM COPYING
  </h3><p>
    You may copy and distribute the Document in any medium, either
    commercially or noncommercially, provided that this License, the copyright
    notices, and the license notice saying this License applies to the
    Document are reproduced in all copies, and that you add no other
    conditions whatsoever to those of this License. You may not use technical
    measures to obstruct or control the reading or further copying of the
    copies you make or distribute. However, you may accept compensation in
    exchange for copies. If you distribute a large enough number of copies you
    must also follow the conditions in section 3.
  </p><p>
    You may also lend copies, under the same conditions stated above, and you
    may publicly display copies.
  </p><h3><a name="section3"></a>
    3. COPYING IN QUANTITY
  </h3><p>
    If you publish printed copies (or copies in media that commonly have
    printed covers) of the Document, numbering more than 100, and the
    Document&#8217;s license notice requires Cover Texts, you must enclose
    the copies in covers that carry, clearly and legibly, all these Cover
    Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on the
    back cover. Both covers must also clearly and legibly identify you as the
    publisher of these copies. The front cover must present the full title
    with all words of the title equally prominent and visible. You may add
    other material on the covers in addition. Copying with changes limited to
    the covers, as long as they preserve the title of the Document and satisfy
    these conditions, can be treated as verbatim copying in other respects.
  </p><p>
    If the required texts for either cover are too voluminous to fit legibly,
    you should put the first ones listed (as many as fit reasonably) on the
    actual cover, and continue the rest onto adjacent pages.
  </p><p>
    If you publish or distribute Opaque copies of the Document numbering more
    than 100, you must either include a machine-readable Transparent copy
    along with each Opaque copy, or state in or with each Opaque copy a
    computer-network location from which the general network-using public has
    access to download using public-standard network protocols a complete
    Transparent copy of the Document, free of added material. If you use the
    latter option, you must take reasonably prudent steps, when you begin
    distribution of Opaque copies in quantity, to ensure that this Transparent
    copy will remain thus accessible at the stated location until at least one
    year after the last time you distribute an Opaque copy (directly or
    through your agents or retailers) of that edition to the public.
  </p><p>
    It is requested, but not required, that you contact the authors of the
    Document well before redistributing any large number of copies, to give
    them a chance to provide you with an updated version of the Document.
  </p><h3><a name="section4"></a>
    4. MODIFICATIONS
  </h3><p>
    You may copy and distribute a Modified Version of the Document under the
    conditions of sections 2 and 3 above, provided that you release the
    Modified Version under precisely this License, with the Modified Version
    filling the role of the Document, thus licensing distribution and
    modification of the Modified Version to whoever possesses a copy of it. In
    addition, you must do these things in the Modified Version:
  </p><div class="orderedlist"><ol class="orderedlist" type="A"><li class="listitem">
        Use in the Title Page (and on the covers, if any) a title distinct
        from that of the Document, and from those of previous versions (which
        should, if there were any, be listed in the History section of the
        Document). You may use the same title as a previous version if the
        original publisher of that version gives permission.
      </li><li class="listitem">
        List on the Title Page, as authors, one or more persons or entities
        responsible for authorship of the modifications in the Modified
        Version, together with at least five of the principal authors of the
        Document (all of its principal authors, if it has fewer than five),
        unless they release you from this requirement.
      </li><li class="listitem">
        State on the Title page the name of the publisher of the Modified
        Version, as the publisher.
      </li><li class="listitem">
        Preserve all the copyright notices of the Document.
      </li><li class="listitem">
        Add an appropriate copyright notice for your modifications adjacent to
        the other copyright notices.
      </li><li class="listitem">
        Include, immediately after the copyright notices, a license notice
        giving the public permission to use the Modified Version under the
        terms of this License, in the form shown in the Addendum below.
      </li><li class="listitem">
        Preserve in that license notice the full lists of Invariant Sections
        and required Cover Texts given in the Document&#8217;s license
        notice.
      </li><li class="listitem">
        Include an unaltered copy of this License.
      </li><li class="listitem">
        Preserve the section Entitled &#8220;History&#8221;, Preserve its
        Title, and add to it an item stating at least the title, year, new
        authors, and publisher of the Modified Version as given on the Title
        Page. If there is no section Entitled &#8220;History&#8221; in the
        Document, create one stating the title, year, authors, and publisher
        of the Document as given on its Title Page, then add an item
        describing the Modified Version as stated in the previous sentence.
      </li><li class="listitem">
        Preserve the network location, if any, given in the Document for
        public access to a Transparent copy of the Document, and likewise the
        network locations given in the Document for previous versions it was
        based on.  These may be placed in the &#8220;History&#8221;
        section. You may omit a network location for a work that was published
        at least four years before the Document itself, or if the original
        publisher of the version it refers to gives permission.
      </li><li class="listitem">
        For any section Entitled &#8220;Acknowledgements&#8221; or
        &#8220;Dedications&#8221;, Preserve the Title of the section, and
        preserve in the section all the substance and tone of each of the
        contributor acknowledgements and/or dedications given therein.
      </li><li class="listitem">
        Preserve all the Invariant Sections of the Document, unaltered in
        their text and in their titles. Section numbers or the equivalent are
        not considered part of the section titles.
      </li><li class="listitem">
        Delete any section Entitled &#8220;Endorsements&#8221;. Such a section
        may not be included in the Modified Version.
      </li><li class="listitem">
        Do not retitle any existing section to be Entitled
        &#8220;Endorsements&#8221; or to conflict in title with any Invariant
        Section.
      </li><li class="listitem">
        Preserve any Warranty Disclaimers.
      </li></ol></div><p>
    If the Modified Version includes new front-matter sections or appendices
    that qualify as Secondary Sections and contain no material copied from the
    Document, you may at your option designate some or all of these sections
    as invariant. To do this, add their titles to the list of Invariant
    Sections in the Modified Version&#8217;s license notice. These titles
    must be distinct from any other section titles.
  </p><p>
    You may add a section Entitled &#8220;Endorsements&#8221;, provided it
    contains nothing but endorsements of your Modified Version by various
    parties &#8212; for example, statements of peer review or that the text
    has been approved by an organization as the authoritative definition of a
    standard.
  </p><p>
    You may add a passage of up to five words as a Front-Cover Text, and a
    passage of up to 25 words as a Back-Cover Text, to the end of the list of
    Cover Texts in the Modified Version. Only one passage of Front-Cover Text
    and one of Back-Cover Text may be added by (or through arrangements made
    by) any one entity. If the Document already includes a cover text for the
    same cover, previously added by you or by arrangement made by the same
    entity you are acting on behalf of, you may not add another; but you may
    replace the old one, on explicit permission from the previous publisher
    that added the old one.
  </p><p>
    The author(s) and publisher(s) of the Document do not by this License give
    permission to use their names for publicity for or to assert or imply
    endorsement of any Modified Version.
  </p><h3><a name="section5"></a>
    5. COMBINING DOCUMENTS
  </h3><p>
    You may combine the Document with other documents released under this
    License, under the terms defined in section 4 above for modified versions,
    provided that you include in the combination all of the Invariant Sections
    of all of the original documents, unmodified, and list them all as
    Invariant Sections of your combined work in its license notice, and that
    you preserve all their Warranty Disclaimers.
  </p><p>
    The combined work need only contain one copy of this License, and multiple
    identical Invariant Sections may be replaced with a single copy. If there
    are multiple Invariant Sections with the same name but different contents,
    make the title of each such section unique by adding at the end of it, in
    parentheses, the name of the original author or publisher of that section
    if known, or else a unique number. Make the same adjustment to the section
    titles in the list of Invariant Sections in the license notice of the
    combined work.
  </p><p>
    In the combination, you must combine any sections Entitled
    &#8220;History&#8221; in the various original documents, forming one
    section Entitled &#8220;History&#8221;; likewise combine any sections
    Entitled &#8220;Acknowledgements&#8221;, and any sections Entitled
    &#8220;Dedications&#8221;. You must delete all sections Entitled
    &#8220;Endorsements&#8221;.
  </p><h3><a name="section6"></a>
    6. COLLECTIONS OF DOCUMENTS
  </h3><p>
    You may make a collection consisting of the Document and other documents
    released under this License, and replace the individual copies of this
    License in the various documents with a single copy that is included in
    the collection, provided that you follow the rules of this License for
    verbatim copying of each of the documents in all other respects.
  </p><p>
    You may extract a single document from such a collection, and distribute
    it individually under this License, provided you insert a copy of this
    License into the extracted document, and follow this License in all other
    respects regarding verbatim copying of that document.
  </p><h3><a name="section7"></a>
    7. AGGREGATION WITH INDEPENDENT WORKS
  </h3><p>
    A compilation of the Document or its derivatives with other separate and
    independent documents or works, in or on a volume of a storage or
    distribution medium, is called an &#8220;aggregate&#8221; if the copyright
    resulting from the compilation is not used to limit the legal rights of
    the compilation&#8217;s users beyond what the individual works
    permit. When the Document is included in an aggregate, this License does
    not apply to the other works in the aggregate which are not themselves
    derivative works of the Document.
  </p><p>
    If the Cover Text requirement of section 3 is applicable to these copies
    of the Document, then if the Document is less than one half of the entire
    aggregate, the Document&#8217;s Cover Texts may be placed on covers that
    bracket the Document within the aggregate, or the electronic equivalent of
    covers if the Document is in electronic form. Otherwise they must appear
    on printed covers that bracket the whole aggregate.
  </p><h3><a name="section8"></a>
    8. TRANSLATION
  </h3><p>
    Translation is considered a kind of modification, so you may distribute
    translations of the Document under the terms of section 4. Replacing
    Invariant Sections with translations requires special permission from
    their copyright holders, but you may include translations of some or all
    Invariant Sections in addition to the original versions of these Invariant
    Sections. You may include a translation of this License, and all the
    license notices in the Document, and any Warranty Disclaimers, provided
    that you also include the original English version of this License and the
    original versions of those notices and disclaimers. In case of a
    disagreement between the translation and the original version of this
    License or a notice or disclaimer, the original version will prevail.
  </p><p>
    If a section in the Document is Entitled &#8220;Acknowledgements&#8221;,
    &#8220;Dedications&#8221;, or &#8220;History&#8221;, the requirement
    (section 4) to Preserve its Title (section 1) will typically require
    changing the actual title.
  </p><h3><a name="section9"></a>
    9. TERMINATION
  </h3><p>
    You may not copy, modify, sublicense, or distribute the Document except as
    expressly provided under this License. Any attempt otherwise to copy,
    modify, sublicense, or distribute it is void, and will automatically
    terminate your rights under this License.
  </p><p>
    However, if you cease all violation of this License, then your license
    from a particular copyright holder is reinstated (a) provisionally, unless
    and until the copyright holder explicitly and finally terminates your
    license, and (b) permanently, if the copyright holder fails to notify you
    of the violation by some reasonable means prior to 60 days after the
    cessation.
  </p><p>
    Moreover, your license from a particular copyright holder is reinstated
    permanently if the copyright holder notifies you of the violation by some
    reasonable means, this is the first time you have received notice of
    violation of this License (for any work) from that copyright holder, and
    you cure the violation prior to 30 days after your receipt of the notice.
  </p><p>
    Termination of your rights under this section does not terminate the
    licenses of parties who have received copies or rights from you under this
    License. If your rights have been terminated and not permanently
    reinstated, receipt of a copy of some or all of the same material does not
    give you any rights to use it.
  </p><h3><a name="section10"></a>
    10. FUTURE REVISIONS OF THIS LICENSE
  </h3><p>
    The Free Software Foundation may publish new, revised versions of the GNU
    Free Documentation License from time to time. Such new versions will be
    similar in spirit to the present version, but may differ in detail to
    address new problems or concerns. See
    <a class="ulink" href="http://www.gnu.org/copyleft/" target="_top">Copyleft</a>.
  </p><p>
    Each version of the License is given a distinguishing version number. If
    the Document specifies that a particular numbered version of this License
    &#8220;or any later version&#8221; applies to it, you have the option of
    following the terms and conditions either of that specified version or of
    any later version that has been published (not as a draft) by the Free
    Software Foundation. If the Document does not specify a version number of
    this License, you may choose any version ever published (not as a draft)
    by the Free Software Foundation. If the Document specifies that a proxy
    can decide which future versions of this License can be used, that
    proxy&#8217;s public statement of acceptance of a version permanently
    authorizes you to choose that version for the Document.
  </p><h3><a name="section11"></a>
    11. RELICENSING
  </h3><p>
    &#8220;Massive Multiauthor Collaboration Site&#8221; (or &#8220;MMC
    Site&#8221;) means any World Wide Web server that publishes copyrightable
    works and also provides prominent facilities for anybody to edit those
    works. A public wiki that anybody can edit is an example of such a
    server. A &#8220;Massive Multiauthor Collaboration&#8221; (or
    &#8220;MMC&#8221;) contained in the site means any set of copyrightable
    works thus published on the MMC site.
  </p><p>
    &#8220;CC-BY-SA&#8221; means the Creative Commons Attribution-Share Alike
    3.0 license published by Creative Commons Corporation, a not-for-profit
    corporation with a principal place of business in San Francisco,
    California, as well as future copyleft versions of that license published
    by that same organization.
  </p><p>
    &#8220;Incorporate&#8221; means to publish or republish a Document, in
    whole or in part, as part of another Document.
  </p><p>
    An MMC is &#8220;eligible for relicensing&#8221; if it is licensed under
    this License, and if all works that were first published under this
    License somewhere other than this MMC, and subsequently incorporated in
    whole or in part into the MMC, (1) had no cover texts or invariant
    sections, and (2) were thus incorporated prior to November 1, 2008.
  </p><p>
    The operator of an MMC Site may republish an MMC contained in the site
    under CC-BY-SA on the same site at any time before August 1, 2009,
    provided the MMC is eligible for relicensing.
  </p><h3><a name="addendum"></a>
    ADDENDUM: How to use this License for your documents
  </h3><p>
    To use this License in a document you have written, include a copy of the
    License in the document and put the following copyright and license
    notices just after the title page:
  </p><pre class="screen">Copyright © YEAR YOUR NAME

Permission is granted to copy, distribute and/or modify this document under the
terms of the GNU Free Documentation License, Version 1.3 or any later version
published by the Free Software Foundation; with no Invariant Sections, no
Front-Cover Texts, and no Back-Cover Texts. A copy of the license is included in
the section entitled &#8220;GNU Free Documentation License&#8221;.</pre><p>
    If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
    replace the &#8220;with&#8230; Texts.&#8221; line with this:
  </p><pre class="screen">with the Invariant Sections being LIST THEIR TITLES, with the Front-Cover Texts
being LIST, and with the Back-Cover Texts being LIST.</pre><p>
    If you have Invariant Sections without Cover Texts, or some other
    combination of the three, merge those two alternatives to suit the
    situation.
  </p><p>
    If your document contains nontrivial examples of program code, we
    recommend releasing these examples in parallel under your choice of free
    software license, such as the GNU General Public License, to permit their
    use in free software.
  </p></div><div lang="en_US" class="glossary" title="Glossary"><div class="titlepage"><div><div><h2 class="title"><a name="idp1161296"></a>Glossary</h2></div></div></div><div class="glossdiv" title="Config5 Concepts"><h3 class="title"><span class="productname">Config5</span> Concepts</h3><dl><dt><a name="g.change"></a>Change</dt><dd><p>A change defines a single modification to the configuration.
        Changes always belong to a class.</p><p>See Also <a class="glossseealso" href="#g.class">Class</a>.</p></dd><dt><a name="g.class"></a>Class</dt><dd><p>A class is part of a feature and defines a set of changes. When
        applying the configuration <span class="productname">Config5</span> searches
        for the best matching class in each feature.</p><p>A class can include other classes of the same feature.
        Substitutions for files defined at class level are available in all
        changes of the class or any included class.</p><p>See Also <a class="glossseealso" href="#g.feature">Feature</a>, <a class="glossseealso" href="#g.change">Change</a>.</p></dd><dt><a name="g.dk"></a>Deployment Kit</dt><dd><p>The deployment kit is that part of the Config5 distribution that
        needs to be present on all managed systems. By default this is
        everyting in the <code class="filename">deploy</code> folder
        in the distribution and contains scripts, library files, settings and
        the feature set.</p></dd><dt><a name="g.feature"></a>Feature</dt><dd><p>A feature groups together changes that belong together according
        to some criteria, including all files needed for these changes.
        Features are structured into classes.</p><p>See Also <a class="glossseealso" href="#g.class">Class</a>, <a class="glossseealso" href="#g.change">Change</a>.</p></dd><dt><a name="g.featureset"></a>Feature Set</dt><dd><p>The feature set groups together all features of a deployable
        configuration.</p><p>See Also <a class="glossseealso" href="#g.feature">Feature</a>.</p></dd><dt><a name="g.pass"></a>Pass</dt><dd><p>The configuration is applied in ten passes, in each pass all
        phases are performed once. Changes are flagged to run in a given pass.
        </p><p>See Also <a class="glossseealso" href="#g.feature">Feature</a>, <a class="glossseealso" href="#g.feature">Feature</a>.</p></dd><dt><a name="g.phase"></a>Phase</dt><dd><p>The application of the configuration of one pass is structured
        into phases. Each phase groups all changes that affect a given
        configurable aspect of a system such as files, packages, services,
        etc.</p><p>See Also <a class="glossseealso" href="#g.pass">Pass</a>.</p></dd><dt><a name="g.spec"></a>Specification File</dt><dd><p>The specification file is part of a feature and contains the
        classed and changes.</p><p>See Also <a class="glossseealso" href="#g.feature">Feature</a>.</p></dd><dt><a name="g.stage"></a>Stage</dt><dd><p>The stage defines the state a target system is currently in when
        the configuration is applied. Only the changes that are intended to be
        applied at this stage are applied.</p><p>See Also <a class="glossseealso" href="#g.change">Change</a>.</p></dd><dt><a name="g.substitution"></a>Substitution</dt><dd><p>Substitutions are keywords that are substituted by a value using
        <span class="productname">Template Toolkit</span>. They are specified in
        class definitions and in changes that support it.</p><p>See Also <a class="glossseealso" href="#g.class">Class</a>, <a class="glossseealso" href="#g.change">Change</a>.</p></dd></dl></div></div><div lang="en_US" class="bibliography" title="Bibliography"><div class="titlepage"><div><div><h2 class="title"><a name="idp1404144"></a>Bibliography</h2></div></div></div><div class="bibliodiv" title="Web Resources"><h3 class="title"><a name="idp1405280"></a>Web Resources</h3><div class="biblioentry"><a name="bib.bcfg2"></a><p>[1] <span class="biblioset" title="Bcfg2 Project Website"><i><span class="productname">Bcfg2</span> Project Website</i>. </span><span class="biblioset" title="http://trac.mcs.anl.gov/projects/bcfg2"><i><a class="ulink" href="http://trac.mcs.anl.gov/projects/bcfg2" target="_top"><em class="citetitle">http://trac.mcs.anl.gov/projects/bcfg2</em></a></i>. </span></p></div><div class="biblioentry"><a name="bib.cfengine"></a><p>[2] <span class="biblioset" title="Cfengine Product Website"><i><span class="productname">Cfengine</span> Product Website</i>. </span><span class="biblioset" title="http://www.cfengine.org/"><i><a class="ulink" href="http://www.cfengine.org/" target="_top"><em class="citetitle">http://www.cfengine.org/</em></a></i>. </span></p></div><div class="biblioentry"><a name="bib.lcfg"></a><p>[3] <span class="biblioset" title="LCFG Product Website"><i><span class="productname">LCFG</span> Product Website</i>. </span><span class="biblioset" title="http://www.lcfg.org/"><i><a class="ulink" href="http://www.lcfg.org/" target="_top"><em class="citetitle">http://www.lcfg.org/</em></a></i>. </span></p></div><div class="biblioentry"><a name="bib.puppet"></a><p>[4] <span class="biblioset" title="Puppet Product Website"><i><span class="productname">Puppet</span> Product Website</i>. </span><span class="biblioset" title="http://www.puppetlabs.com/"><i><a class="ulink" href="http://www.puppetlabs.com/" target="_top"><em class="citetitle">http://www.puppetlabs.com/</em></a></i>. </span></p></div><div class="biblioentry"><a name="bib.templatetoolkit"></a><p>[5] <span class="biblioset" title="Template Toolkit Home Page"><i><span class="productname">Template Toolkit</span> Home Page</i>. </span><span class="biblioset" title="http://template-toolkit.org/"><i><a class="ulink" href="http://template-toolkit.org/" target="_top"><em class="citetitle">http://template-toolkit.org/</em></a></i>. </span></p></div></div><div class="bibliodiv" title="Papers"><h3 class="title"><a name="idp1425872"></a>Papers</h3><div class="biblioentry"><a name="bib.tetre2"></a><p>[6] <span class="biblioset" title="TemplateTree II: The Post-Installation Setup Tool"><i>TemplateTree II: The Post-Installation Setup Tool</i>. <span class="author"><span class="firstname">Tobias</span> <span class="surname">Oetiker</span>. </span><span class="copyright">Copyright © 2001. </span><span class="pagenums">179-185 of the Proceedings of LISA &#8217;01: Fifteenth Large
        Installation Systems Administration Conference. </span></span></p></div></div></div></div></body></html>
