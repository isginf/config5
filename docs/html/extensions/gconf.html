<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>GConf Extension for Config5</title><link rel="stylesheet" href="docbook.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en_US" class="book" title="GConf Extension for Config5"><div class="titlepage"><div><div><h1 class="title"><a name="idp44720"></a>GConf Extension for Config5</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Stefan</span> <span class="surname">Walter</span></h3><code class="email">&lt;<a class="email" href="mailto:stefan.walter@inf.ethz.ch">stefan.walter@inf.ethz.ch</a>&gt;</code></div></div><div><p class="copyright">Copyright © 2012 ETH Zurich, ISGINF</p></div><div><div class="legalnotice" title="Legal Notice"><a name="idp44384"></a><p>Permission is granted to copy, distribute and/or modify this
      document under the terms of the GNU Free Documentation License, Version
      1.3 or any later version published by the Free Software Foundation; with
      no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A
      copy of the license is included in the section entitled "GNU Free
      Documentation License" of the "Config5 Systems Administrator's
      Guide".</p></div></div><div><p class="pubdate">August 2012</p></div><div><div class="revhistory"><table border="1" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="2"><b>Revision History</b></th></tr><tr><td align="left"></td><td align="left">August 2012</td></tr><tr><td align="left" colspan="2">First Revision.</td></tr></table></div></div></div><hr></div><div class="chapter" title="Chapter 1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a name="idp62176"></a>Chapter 1. Introduction</h2></div></div></div><div class="section" title="1.1. Overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp41824"></a>1.1. Overview</h2></div></div></div><p>The <span class="productname">GConf Extension</span> provides the
      <code class="function">gconf</code> change which adds the capability to
      <span class="productname">Config5</span> to modify
      <span class="productname">GNOME</span> settings using the
      <span class="productname">GNOME</span> configuration tool.</p></div><div class="section" title="1.2. Examples"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp65952"></a>1.2. Examples</h2></div></div></div><p>The following examples illustrate the basic usage of this
      extension.</p><div class="section" title="1.2.1. Change Default Mailer"><div class="titlepage"><div><div><h3 class="title"><a name="idp66976"></a>1.2.1. Change Default Mailer</h3></div></div></div><p>The following sample spec file shows how to change the default
        mailer to <span class="productname">Thunderbird</span> using the
        <code class="function">set</code> action of the <code class="function">augeas</code>
        change:</p><pre class="screen">RedHatEnterpriseWorkstation:
  gconf set /desktop/gnome/url-handlers/mailto/command 'thunderbird %s'</pre><p>The path
        <code class="filename">/desktop/gnome/url-handlers/mailto/command</code> is the
        key to set in the GConf repository.</p></div><div class="section" title="1.2.2. Disable GDM Banner Message"><div class="titlepage"><div><div><h3 class="title"><a name="idp70432"></a>1.2.2. Disable GDM Banner Message</h3></div></div></div><p>To hide the GDM banner message the <code class="function">clear</code>
        action of the <code class="function">gconf</code> change can be used as shown
        in the following sample <code class="filename">spec</code> file:</p><pre class="screen">RedHatEnterpriseServer:
  gconf clear /apps/gdm/simple-greeter/banner_message_enable</pre></div></div></div><div class="chapter" title="Chapter 2. Installation and Customization"><div class="titlepage"><div><div><h2 class="title"><a name="idp73376"></a>Chapter 2. Installation and Customization</h2></div></div></div><div class="section" title="2.1. Installation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp74016"></a>2.1. Installation</h2></div></div></div><p>This extension is contained in the archive
      <code class="filename">extensions/gconf.tgz</code> which is part of the
      <span class="productname">Config5</span> distribution. Simply extract this
      archive in the <code class="filename">deploy</code> directory.</p><div class="section" title="2.1.1. Files"><div class="titlepage"><div><div><h3 class="title"><a name="idp76192"></a>2.1.1. Files</h3></div></div></div><p>The following files are included in the archive:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="filename">etc/extensions.d/gconf.pl</code></p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="filename">lib/perl/Config5/Change/Extensions/GConf.pm</code></p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="filename">lib/perl/Config5/Action/Extensions/GConf.pm</code></p></li></ul></div></div></div><div class="section" title="2.2. Settings"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp82544"></a>2.2. Settings</h2></div></div></div><p>This following settings can be customized:</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th align="left">Setting</th><th align="left">Default</th><th align="left">Description</th></tr></thead><tbody><tr><td class="nowrap"><code class="varname">$self-&gt;{extension}-&gt;{gconf}-&gt;{command}</code></td><td><code class="filename">gconftool-2</code></td><td>The name of the GNOME configuration tool binary.</td></tr></tbody></table></div></div></div><div class="chapter" title="Chapter 3. Changes"><div class="titlepage"><div><div><h2 class="title"><a name="idp91488"></a>Chapter 3. Changes</h2></div></div></div><div class="section" title="3.1. Changes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp92304"></a>3.1. Changes</h2></div></div></div><p>This extension provides the <code class="function">gconf</code> change
      which has two actions: <code class="function">set</code> and
      <code class="function">clear</code>.</p><div class="section" title="3.1.1. gconf set"><div class="titlepage"><div><div><h3 class="title"><a name="idp94896"></a>3.1.1. gconf set</h3></div></div></div><p>The <code class="function">set</code> action of the
        <code class="function">gconf</code> change will set the value of a given key in
        the GConf repository.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Synopsis</td><td><code class="function">gconf</code>
                [<strong class="userinput"><code><code class="option">-nbtT</code></code></strong>]
                <code class="function">set</code> <em class="parameter"><code>key</code></em>
                <em class="parameter"><code>value</code></em>
                [<em class="parameter"><code>type</code></em>]</td></tr></tbody></table></div><p>The parameter <em class="parameter"><code>key</code></em> is the key in the
        default GConf repository to set, <em class="parameter"><code>value</code></em> is the
        value to set it to. If either contains a white space it must be
        quoted. If the key does not exist it will be created. The data type of
        the key is assumed to be <code class="constant">string</code> unless the
        optional <em class="parameter"><code>type</code></em> parameter is specified in which
        case this type is used.</p><p>Substitutions passed down from the class definition are applied
        to <em class="parameter"><code>value</code></em> unless the <code class="option">-b</code> flag is
        used.</p><div class="example"><a name="idp106800"></a><p class="title"><b>Example 3.1. Set</b></p><div class="example-contents"><pre class="programlisting">sample:
  gconf set /apps/gdm/simple-greeter/banner_message_text "Welcome to [% info_host %]"
  gconf set /apps/gdm/simple-greeter/banner_message_enable true bool</pre></div></div><br class="example-break"></div><div class="section" title="3.1.2. gconf clear"><div class="titlepage"><div><div><h3 class="title"><a name="idp108368"></a>3.1.2. gconf clear</h3></div></div></div><p>The <code class="function">clear</code> action of the
        <code class="function">gconf</code> change will unset the given key in the
        GConf repository.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Synopsis</td><td><code class="function">gconf</code>
                [<strong class="userinput"><code><code class="option">-ntT</code></code></strong>]
                <code class="function">clear</code> <em class="parameter"><code>key</code></em></td></tr></tbody></table></div><p>The parameter <em class="parameter"><code>key</code></em> is the key in the
        default GConf repository to unset.</p><div class="example"><a name="idp116768"></a><p class="title"><b>Example 3.2. Remove</b></p><div class="example-contents"><pre class="programlisting">sample:
  gconf remove /desktop/gnome/url-handlers/mailto/command</pre></div></div><br class="example-break"></div></div><div class="section" title="3.2. Configuration Application"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp118160"></a>3.2. Configuration Application</h2></div></div></div><div class="section" title="3.2.1. Phase"><div class="titlepage"><div><div><h3 class="title"><a name="idp119008"></a>3.2.1. Phase</h3></div></div></div><p>The <code class="function">gconf</code> change are applied in the
        <code class="constant">configure</code> phase.</p></div><div class="section" title="3.2.2. Order"><div class="titlepage"><div><div><h3 class="title"><a name="idp121312"></a>3.2.2. Order</h3></div></div></div><p>All <code class="function">gconf</code> changes of a pass are applied in
        the order the changes are encountered during the parsing of the
        <code class="filename">spec</code> files.</p></div><div class="section" title="3.2.3. Application"><div class="titlepage"><div><div><h3 class="title"><a name="idp123840"></a>3.2.3. Application</h3></div></div></div><p>Each change is applied with one execution of the
        <span class="productname">GNOME</span> configuration tool.</p></div><div class="section" title="3.2.4. Trigger Flag"><div class="titlepage"><div><div><h3 class="title"><a name="idp125632"></a>3.2.4. Trigger Flag</h3></div></div></div><p>The the trigger flag for triggered changes is set when an
        <code class="function">gconf</code> change needs to be applied.</p></div><div class="section" title="3.2.5. Root Directory"><div class="titlepage"><div><div><h3 class="title"><a name="idp127568"></a>3.2.5. Root Directory</h3></div></div></div><p>Changes of this extension are only applied if the root system
        information item is equal to <code class="filename">/</code>.</p></div></div></div><div class="appendix" title="Appendix A. Error Messages"><div class="titlepage"><div><div><h2 class="title"><a name="idp129600"></a>Appendix A. Error Messages</h2></div></div></div><div class="section" title="A.1. System Errors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp130416"></a>A.1. System Errors</h2></div></div></div><p>System errors are fatal, no changes will be done to the
      system.</p><div class="variablelist"><dl><dt><span class="term">Failed to obtain GConf default source</span></dt><dd><p>The default GConf default source could not be determined by
            running the <span class="productname">GNOME</span> configuration tool
            with the command line option
            <code class="option">--get-default-source</code>.</p></dd></dl></div></div><div class="section" title="A.2. Configuration Data Errors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp134992"></a>A.2. Configuration Data Errors</h2></div></div></div><p>Configuration data errors are fatal, no changes will be done to
      the system.</p><div class="variablelist"><dl><dt><span class="term">Invalid action '&#8230;' in &#8230;</span></dt><dd><p>The action must be <code class="constant">set</code> or
            <code class="constant">clear</code>.</p></dd></dl></div></div><div class="section" title="A.3. Configuration Application Errors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp139632"></a>A.3. Configuration Application Errors</h2></div></div></div><p>The following errors are reported for changes as they are applied
      but do not interrupt the application of other changes.</p><div class="variablelist"><dl><dt><span class="term">Invalid action '&#8230;' in &#8230;</span></dt><dd><p>The action must be <code class="constant">set</code> or
            <code class="constant">clear</code>.</p></dd><dt><span class="term">Failed to <span class="emphasis"><em>action</em></span> key
          <span class="emphasis"><em>key</em></span> in &#8230;</span></dt><dd><p>The key could not be set or cleared. Typically the specified
            key does not exist in the GConf repository.</p></dd></dl></div></div></div></div></body></html>
